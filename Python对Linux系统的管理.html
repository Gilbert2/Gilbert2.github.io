<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"pdxblog.top","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"b2t":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Python">
<meta property="og:type" content="article">
<meta property="og:title" content="Python对Linux系统的管理">
<meta property="og:url" content="https://pdxblog.top/Python%E5%AF%B9Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%AE%A1%E7%90%86.html">
<meta property="og:site_name" content="Maisyの博客">
<meta property="og:description" content="Python">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-04-26T16:00:00.000Z">
<meta property="article:modified_time" content="2020-04-27T14:43:53.427Z">
<meta property="article:author" content="Maisy">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://pdxblog.top/Python%E5%AF%B9Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%AE%A1%E7%90%86.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Python对Linux系统的管理 | Maisyの博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Maisyの博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Maisyの博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录生活中的点点滴滴</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-top">

    <a href="/top/" rel="section"><i class="fa fa-signal fa-fw"></i>排行榜</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">4</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">4</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">50</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://pdxblog.top/Python%E5%AF%B9Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%AE%A1%E7%90%86.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="Maisy">
      <meta itemprop="description" content="人的一生就是一个储蓄的过程，在奋斗的时候储存了希望；在耕耘的时候储存了一粒种子；在旅行的时候储存了风景；在微笑的时候储存了快乐。聪明的人善于储蓄，在漫长而短暂的人生旅途中，学会储蓄每一个闪光的瞬间，然后用它们酿成一杯美好的回忆，在四季的变幻与交替之间，散发浓香，珍藏一生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Maisyの博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python对Linux系统的管理
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-27 00:00:00 / 修改时间：22:43:53" itemprop="dateCreated datePublished" datetime="2020-04-27T00:00:00+08:00">2020-04-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="热度" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">热度：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/Python%E5%AF%B9Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%AE%A1%E7%90%86.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/Python%E5%AF%B9Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%AE%A1%E7%90%86.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>21k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>19 分钟</span>
            </span>
            <div class="post-description">Python</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Python对Linux系统的管理"><a href="#Python对Linux系统的管理" class="headerlink" title="Python对Linux系统的管理"></a>Python对Linux系统的管理</h2><h3 id="一、OS模块常用功能"><a href="#一、OS模块常用功能" class="headerlink" title="一、OS模块常用功能"></a>一、OS模块常用功能</h3><h4 id="1、os模块打开文件"><a href="#1、os模块打开文件" class="headerlink" title="1、os模块打开文件"></a>1、os模块打开文件</h4><p>方法如下：</p>
<blockquote>
<p>os.open(filename, flag, [,mode])</p>
</blockquote>
<p>flag参数说明：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">os.O_CREAT	# 创建文件</span><br><span class="line">os.O_RDONLY	# 只读方式打开</span><br><span class="line">os.O_WRONLY	# 只写方式打开</span><br><span class="line">os.O_RDWR	# 读写方式打开</span><br></pre></td></tr></table></figure>

<h4 id="2、os模块对文件进行操作"><a href="#2、os模块对文件进行操作" class="headerlink" title="2、os模块对文件进行操作"></a>2、os模块对文件进行操作</h4><p>常用方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取文件</span></span><br><span class="line">os.read(fd, buffersize)</span><br><span class="line"><span class="comment"># 写入文件</span></span><br><span class="line">os.write(fd, string)</span><br><span class="line"><span class="comment"># 文件指针操作</span></span><br><span class="line">os.lseek(fd, pos, how)</span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">os.close(fd)</span><br></pre></td></tr></table></figure>

<p>代码演示：</p>
<blockquote>
<p>文件创建和写入</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line">fd = os.open(<span class="string">"abc.txt"</span>, os.O_RDWR | os.O_CREAT)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入字符串</span></span><br><span class="line">str = <span class="string">"Hello Python!"</span></span><br><span class="line">ret = os.write(fd, bytes(str, <span class="string">'UTF-8'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入返回值</span></span><br><span class="line">print(<span class="string">"写入的位数为: "</span>)</span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"写入成功"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">os.close(fd)</span><br><span class="line">print(<span class="string">"关闭文件成功!!"</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>文件读取</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line">fd = os.open(<span class="string">"abc.txt"</span>, os.O_RDWR)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文本</span></span><br><span class="line">ret = os.read(fd, <span class="number">6</span>)</span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">os.close(fd)</span><br><span class="line">print(<span class="string">"关闭文件成功!!"</span>)</span><br></pre></td></tr></table></figure>

<h4 id="3、os模块管理文件和目录"><a href="#3、os模块管理文件和目录" class="headerlink" title="3、os模块管理文件和目录"></a>3、os模块管理文件和目录</h4><p>常用方法如下：</p>
<table>
<thead>
<tr>
<th>os方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>getcwd()</td>
<td>获取当前目录</td>
</tr>
<tr>
<td>listdir(path)</td>
<td>返回当前目录下所有文件组成的列表</td>
</tr>
<tr>
<td>chdir(path)</td>
<td>切换目录</td>
</tr>
<tr>
<td>rename(old, new)</td>
<td>修改文件或者目录名</td>
</tr>
<tr>
<td>mkdir(path [,mode])</td>
<td>创建目录</td>
</tr>
<tr>
<td>makedirs(path [,mode])</td>
<td>创建多级目录</td>
</tr>
<tr>
<td>rmdir(path)</td>
<td>删除目录（目录必须为空目录）</td>
</tr>
<tr>
<td>removedirs(path)</td>
<td>删除多级目录（目录必须为空目录）</td>
</tr>
<tr>
<td>remove(path)</td>
<td>删除文件</td>
</tr>
</tbody></table>
<p>代码演示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(os.getcwd())  <span class="comment"># pwd</span></span><br><span class="line">print(os.listdir()) <span class="comment"># ls</span></span><br><span class="line">os.chdir(<span class="string">'/opt'</span>)	<span class="comment"># cd /opt</span></span><br><span class="line">os.rename(<span class="string">'abc.txt'</span>,<span class="string">'test.txt'</span>) <span class="comment"># mv abc.txt test.txt</span></span><br><span class="line">os.remove(<span class="string">'read.py'</span>)    <span class="comment"># rm -f abc.txt</span></span><br><span class="line"></span><br><span class="line">os.mkdir(<span class="string">'test'</span>)    <span class="comment"># mkdir dir1</span></span><br><span class="line">os.makedirs(<span class="string">'demo/abc'</span>) <span class="comment"># mkdir -p dir2/dir22</span></span><br><span class="line">os.rmdir(<span class="string">'test'</span>)    <span class="comment"># 目录必须为空</span></span><br><span class="line">os.removedirs(<span class="string">'demo'</span>)   <span class="comment"># 目录必须为空</span></span><br></pre></td></tr></table></figure>

<h4 id="4、os模块管理文件权限"><a href="#4、os模块管理文件权限" class="headerlink" title="4、os模块管理文件权限"></a>4、os模块管理文件权限</h4><table>
<thead>
<tr>
<th>os方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>access(path, mode)</td>
<td>判断该文件权限：F_OK表示该路径存在；<br>权限：R_OK，W_OK，X_OK</td>
</tr>
<tr>
<td>chmod(path, mode)</td>
<td>修改文件权限：0o755</td>
</tr>
<tr>
<td>chown(path, uid, gid)</td>
<td>更改文件所有者，如果不修改可以设置为 -1</td>
</tr>
</tbody></table>
<p>代码演示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试路径是否存在：os.F_OK</span></span><br><span class="line">res = os.access('test.txt',os.F_OK)</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试当前用户对该文件是否有读的权限</span></span><br><span class="line">res = os.access('test.txt',os.R_OK)</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试当前用户对该文件是否有写的权限</span></span><br><span class="line">res = os.access('test.txt',os.W_OK)</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试当前用户对该文件是否有执行的权限</span></span><br><span class="line">res = os.access('test.txt',os.X_OK)</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改当前用户的权限</span></span><br><span class="line">os.chmod('test.txt',0o755)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改文件的所有者</span></span><br><span class="line">os.chown('test.txt', 1001, 1002)</span><br></pre></td></tr></table></figure>

<h4 id="5、os-path模块管理文件与路径"><a href="#5、os-path模块管理文件与路径" class="headerlink" title="5、os.path模块管理文件与路径"></a>5、os.path模块管理文件与路径</h4><h5 id="（1）拆分路径"><a href="#（1）拆分路径" class="headerlink" title="（1）拆分路径"></a>（1）拆分路径</h5><table>
<thead>
<tr>
<th>os.path方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>os.path.split(path)</td>
<td>返回一个二元组，包含文件的路径和文件名</td>
</tr>
<tr>
<td>os.path.dirname(path)</td>
<td>返回文件的路径</td>
</tr>
<tr>
<td>os.path.basename(path)</td>
<td>返回文件名</td>
</tr>
<tr>
<td>os.path.splitext(path)</td>
<td>返回一个去掉文件扩展名的部分和扩展名的二元组</td>
</tr>
</tbody></table>
<p>代码演示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">10</span>]: os.getcwd()</span><br><span class="line">Out[<span class="number">10</span>]: <span class="string">'/opt/os_demo'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: os.listdir()</span><br><span class="line">Out[<span class="number">11</span>]: [<span class="string">'os_access.py'</span>, <span class="string">'test.txt'</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: path = <span class="string">'/opt/os_demo/test.txt'</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">13</span>]: os.path.split(path)</span><br><span class="line">Out[<span class="number">13</span>]: (<span class="string">'/opt/os_demo'</span>, <span class="string">'test.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: os.path.dirname(path)</span><br><span class="line">Out[<span class="number">14</span>]: <span class="string">'/opt/os_demo'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: os.path.basename(path)</span><br><span class="line">Out[<span class="number">15</span>]: <span class="string">'test.txt'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: os.path.splitext(path) </span><br><span class="line">Out[<span class="number">16</span>]: (<span class="string">'/opt/os_demo/test'</span>, <span class="string">'.txt'</span>)</span><br></pre></td></tr></table></figure>

<h5 id="（2）构建路径"><a href="#（2）构建路径" class="headerlink" title="（2）构建路径"></a>（2）构建路径</h5><table>
<thead>
<tr>
<th>os.path方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>os.path.expanduser(path)</td>
<td>展开用户的HOME目录，如<del>，</del>oracle</td>
</tr>
<tr>
<td>os.path.abspath(path)</td>
<td>得到文件或路径的绝对路径</td>
</tr>
<tr>
<td>os.path.join(path)</td>
<td>根据不同的操作系统平台，使用不同的路径分隔符拼接路径</td>
</tr>
<tr>
<td>os.path.isabs(path)</td>
<td>检查一个路径是不是一个绝对路径</td>
</tr>
</tbody></table>
<p>代码演示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">19</span>]: os.path.expanduser(<span class="string">'~'</span>) </span><br><span class="line">Out[<span class="number">19</span>]: <span class="string">'/root'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: os.path.expanduser(<span class="string">'~oracle'</span>) </span><br><span class="line">Out[<span class="number">20</span>]: <span class="string">'/home/oracle'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: os.path.expanduser(<span class="string">'~accp'</span>)</span><br><span class="line">Out[<span class="number">21</span>]: <span class="string">'/home/accp'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: os.path.expanduser(<span class="string">'~acp'</span>) </span><br><span class="line">Out[<span class="number">22</span>]: <span class="string">'~acp'</span>	<span class="comment"># 错误演示</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">23</span>]: os.path.abspath(<span class="string">'.'</span>)</span><br><span class="line">Out[<span class="number">23</span>]: <span class="string">'/opt/os_demo'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">24</span>]: os.path.abspath(<span class="string">'..'</span>)</span><br><span class="line">Out[<span class="number">24</span>]: <span class="string">'/opt'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: os.path.join(<span class="string">'/opt/os_demo'</span>,<span class="string">'test.txt'</span>)</span><br><span class="line">Out[<span class="number">25</span>]: <span class="string">'/opt/os_demo/test.txt'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">26</span>]: os.path.isabs(<span class="string">'/opt/os_demo/'</span>) </span><br><span class="line">Out[<span class="number">26</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">27</span>]: os.path.isabs(<span class="string">'.'</span>) </span><br><span class="line">Out[<span class="number">27</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h5 id="（3）获取文件属性"><a href="#（3）获取文件属性" class="headerlink" title="（3）获取文件属性"></a>（3）获取文件属性</h5><table>
<thead>
<tr>
<th>os.path方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>os.path.getatime(path)</td>
<td>返回最近访问时间（浮点型秒数）</td>
</tr>
<tr>
<td>os.path.getmtime(path)</td>
<td>返回最近文件修改时间</td>
</tr>
<tr>
<td>os.path.getctime(path)</td>
<td>返回文件 path 创建时间</td>
</tr>
<tr>
<td>os.path.getsize(path)</td>
<td>返回文件大小，如果文件不存在就返回错误</td>
</tr>
</tbody></table>
<p>代码演示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">33</span>]: os.path.getatime(path)</span><br><span class="line">Out[<span class="number">33</span>]: <span class="number">1587547270.7306058</span>	<span class="comment"># 时间戳</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: os.path.getmtime(path)</span><br><span class="line">Out[<span class="number">34</span>]: <span class="number">1587547270.7306058</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">35</span>]: os.path.getctime(path)</span><br><span class="line">Out[<span class="number">35</span>]: <span class="number">1587548055.4721448</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: os.path.getsize(path)</span><br><span class="line">Out[<span class="number">36</span>]: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h5 id="（4）判断文件类型"><a href="#（4）判断文件类型" class="headerlink" title="（4）判断文件类型"></a>（4）判断文件类型</h5><table>
<thead>
<tr>
<th>os.path方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>os.path.isfile(path)</td>
<td>判断路径是否为文件</td>
</tr>
<tr>
<td>os.path.isdir(path)</td>
<td>判断路径是否为目录</td>
</tr>
<tr>
<td>os.path.islink(path)</td>
<td>判断路径是否为链接</td>
</tr>
<tr>
<td>os.path.ismount(path)</td>
<td>判断路径是否为挂载点</td>
</tr>
</tbody></table>
<p>代码演示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">37</span>]: os.path.isfile(path)</span><br><span class="line">Out[<span class="number">37</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: os.path.isdir(path)</span><br><span class="line">Out[<span class="number">38</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: os.path.islink(path)</span><br><span class="line">Out[<span class="number">39</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">40</span>]: os.path.ismount(path)</span><br><span class="line">Out[<span class="number">40</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h4 id="6、os模块执行shell命令"><a href="#6、os模块执行shell命令" class="headerlink" title="6、os模块执行shell命令"></a>6、os模块执行shell命令</h4><p>os.system()的作用：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">执行shell命令</span><br><span class="line">返回shell命令的返回值</span><br><span class="line">命令的输出会输出到标准输出</span><br></pre></td></tr></table></figure>

<p>代码演示：</p>
<blockquote>
<p>os.system(‘cls’)</p>
</blockquote>
<h4 id="案例1：编写自动安装Python的脚本"><a href="#案例1：编写自动安装Python的脚本" class="headerlink" title="案例1：编写自动安装Python的脚本"></a>案例1：编写自动安装Python的脚本</h4><p>实现步骤：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">下载Python版本源码</span><br><span class="line">安装Python需要的依赖库</span><br><span class="line">编译安装Python</span><br></pre></td></tr></table></figure>

<p>伪代码：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 判断用户是不是root</span><br><span class="line">2. 如果是，等待用户输入Python版本</span><br><span class="line">3. 执行shell命令下载源码包</span><br><span class="line">4. 安装依赖开发包</span><br><span class="line">5. 编译安装Python</span><br></pre></td></tr></table></figure>

<p>脚本内容如下（基于Python2）：</p>
<blockquote>
<p>auto_install_python.py</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> coding=utf-8</span></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断用户是否是root用户</span></span><br><span class="line">if os.getuid() == 0:</span><br><span class="line">    pass</span><br><span class="line">else:</span><br><span class="line">    print</span><br><span class="line">    '当前用户不是root用户！'</span><br><span class="line">    SystemExit(1)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装Python依赖库</span></span><br><span class="line">cmd_module = 'yum -y install wget gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel'</span><br><span class="line">res = os.system(cmd_module)</span><br><span class="line">if res != 0:</span><br><span class="line">    print</span><br><span class="line">    'Python依赖库安装失败，请重新执行该脚本。'</span><br><span class="line">    SystemExit(1)</span><br><span class="line">else:</span><br><span class="line">    print</span><br><span class="line">    'python依赖库安装成功！'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 输入Python版本，下载Python源码包到本地目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget url</span></span><br><span class="line">version = raw_input('请输入Python版本：（3.6/3.8）')</span><br><span class="line">if version == '3.6':</span><br><span class="line">    url = 'https://www.python.org/ftp/python/3.6.10/Python-3.6.10.tgz'</span><br><span class="line">else:</span><br><span class="line">    url = 'https://www.python.org/ftp/python/3.8.1/Python-3.8.1.tgz'</span><br><span class="line">cmd = 'wget ' + url</span><br><span class="line">res = os.system(cmd)</span><br><span class="line">if res != 0:</span><br><span class="line">    print 'Python源码包下载失败！'</span><br><span class="line">    SystemExit(1)</span><br><span class="line">else:</span><br><span class="line">    print('======================&gt;&gt;&gt;Python源码包下载成功！')</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压Python源码包</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tar zxvf Python-3.6.10.tgz</span></span><br><span class="line">if version == '3.6':</span><br><span class="line">    package_name = 'Python-3.6.10'</span><br><span class="line">else:</span><br><span class="line">    package_name = 'Python-3.8.1'</span><br><span class="line">res = os.system('tar zxvf ' + package_name + '.tgz')</span><br><span class="line">if res != 0:</span><br><span class="line">    print '解压失败。。。'</span><br><span class="line">    SystemExit(1)</span><br><span class="line">else:</span><br><span class="line">    print('#########################解压成功！#########################')</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置语言</span></span><br><span class="line">os.system('export LANG=zh_CN.UTF-8')</span><br><span class="line">os.system('export LANGUAGE=zh_CN.UTF-8')</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到Python目录</span></span><br><span class="line">os.chdir(package_name)</span><br><span class="line">os.system('./configure --prefix=/usr/local/python3')</span><br><span class="line">res = os.system('make &amp;&amp; make install')</span><br><span class="line">if res !=0:</span><br><span class="line">    print '源码编译失败。。。'</span><br><span class="line">    SystemExit(1)</span><br><span class="line">else:</span><br><span class="line">    print('####################Python安装成功，请进行验证！####################')</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改用户环境变量</span></span><br><span class="line">os.system('echo "export PYTHON3=/usr/local/python3" &gt;&gt;~/.bash_profile')</span><br><span class="line">os.system('echo "export PATH=$PYTHON3/bin:$PATH" &gt;&gt;~/.bash_profile')</span><br><span class="line">os.system("source ~/.bash_profile")</span><br><span class="line">os.system('cat ~/.bash_profile')</span><br><span class="line">print('####################用户环境变量已修改，请进行验证！####################')</span><br><span class="line">os.system('python3 --version')</span><br></pre></td></tr></table></figure>

<h4 id="7、os-walk函数遍历目录树"><a href="#7、os-walk函数遍历目录树" class="headerlink" title="7、os.walk函数遍历目录树"></a>7、os.walk函数遍历目录树</h4><p>os.walk() 方法遍历某个目录及其子目录，对于每一个目录，walk()函数返回一个三元组（dirpath、dirnames、filenames）。其中dirpath保存的是当前目录，dirnames是当前目录下的子目录列表，filenames是当前目录下的文件列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">"."</span>, topdown=<span class="literal">False</span>):</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">        print(os.path.join(root, name))</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> dirs:</span><br><span class="line">        print(os.path.join(root, name))</span><br></pre></td></tr></table></figure>

<p>os.walk() 方法是一个简单易用的文件、目录遍历器，可以帮助我们高效的处理文件、目录方面的事情。</p>
<h4 id="案例2：打印最常用的10条Linux命令"><a href="#案例2：打印最常用的10条Linux命令" class="headerlink" title="案例2：打印最常用的10条Linux命令"></a>案例2：打印最常用的10条Linux命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">from collections import Counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">count &#x3D; Counter()</span><br><span class="line">with open(os.path.expanduser(&#39;~&#x2F;.bash_history&#39;)) as f:</span><br><span class="line">    for line in f:</span><br><span class="line">        cmd &#x3D; line.strip().split()</span><br><span class="line">        if cmd:</span><br><span class="line">            count[cmd[0]] +&#x3D;1</span><br><span class="line"></span><br><span class="line">print(count.most_common(10))</span><br></pre></td></tr></table></figure>

<h3 id="二、使用ConfigParser类解析配置文件"><a href="#二、使用ConfigParser类解析配置文件" class="headerlink" title="二、使用ConfigParser类解析配置文件"></a>二、使用ConfigParser类解析配置文件</h3><p>Python中有ConfigParser类，可以很方便的从配置文件中读取数据（如DB的配置，路径的配置），所以可以自己写一个函数，实现读取config配置。</p>
<h4 id="1、配置文件的格式"><a href="#1、配置文件的格式" class="headerlink" title="1、配置文件的格式"></a>1、配置文件的格式</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">节：				[session]</span><br><span class="line">参数(键=值)			name=value</span><br></pre></td></tr></table></figure>

<p>mysql配置文件部分内容如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="attr">port</span>		= <span class="number">3306</span></span><br><span class="line"><span class="attr">user</span>		= mysql</span><br><span class="line"><span class="attr">password</span>	= mysql</span><br><span class="line"><span class="attr">host</span>		= <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">basedir</span>		= /usr</span><br><span class="line"><span class="attr">datadir</span>		= /var/lib/mysql</span><br><span class="line"><span class="attr">tmpdir</span>		= /tmp</span><br><span class="line">skip-external-locking</span><br></pre></td></tr></table></figure>

<h4 id="2、ConfigParser类的使用方法"><a href="#2、ConfigParser类的使用方法" class="headerlink" title="2、ConfigParser类的使用方法"></a>2、ConfigParser类的使用方法</h4><h5 id="（1）创建configParser对象"><a href="#（1）创建configParser对象" class="headerlink" title="（1）创建configParser对象"></a>（1）创建configParser对象</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> configparser</span><br><span class="line">    </span><br><span class="line">In [<span class="number">2</span>]: cf = configparser.ConfigParser(allow_no_value=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<h5 id="（2）读取配置文件内容"><a href="#（2）读取配置文件内容" class="headerlink" title="（2）读取配置文件内容"></a>（2）读取配置文件内容</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">3</span>]: cf.read(<span class="string">'my.inf'</span>)</span><br><span class="line">Out[<span class="number">3</span>]: [<span class="string">'my.ini'</span>]</span><br></pre></td></tr></table></figure>

<h5 id="（3）获取配置文件信息"><a href="#（3）获取配置文件信息" class="headerlink" title="（3）获取配置文件信息"></a>（3）获取配置文件信息</h5><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sections: 返回一个包含所有章节的列表</span><br><span class="line">options：返回一个包含章节下所有选项的列表</span><br><span class="line"></span><br><span class="line">has_section：判断章节是否存在</span><br><span class="line">has_options：判断某个选项是否存在</span><br><span class="line"></span><br><span class="line">items：以元组的形式返回所有的选项</span><br><span class="line">get、getboolean、getint、getfloat：获取选项的值</span><br></pre></td></tr></table></figure>

<p>方法测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">4</span>]: cf.sections()</span><br><span class="line">Out[<span class="number">4</span>]: [<span class="string">'client'</span>, <span class="string">'mysqld'</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: cf.has_section(<span class="string">'client'</span>)</span><br><span class="line">Out[<span class="number">5</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]cf.options(<span class="string">'client'</span>)</span><br><span class="line">Out[<span class="number">6</span>]: [<span class="string">'port'</span>, <span class="string">'user'</span>, <span class="string">'password'</span>, <span class="string">'host'</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: cf.has_option(<span class="string">'client'</span>,<span class="string">'user'</span>)</span><br><span class="line">Out[<span class="number">7</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: cf.get(<span class="string">'client'</span>,<span class="string">'port'</span>)</span><br><span class="line">Out[<span class="number">8</span>]: <span class="string">'3306'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: cf.getint(<span class="string">'client'</span>,<span class="string">'port'</span>)</span><br><span class="line">Out[<span class="number">9</span>]: <span class="number">3306</span></span><br></pre></td></tr></table></figure>

<h5 id="（4）修改配置文件"><a href="#（4）修改配置文件" class="headerlink" title="（4）修改配置文件"></a>（4）修改配置文件</h5><p>常用方法：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">remove_section：删除一个章节</span><br><span class="line">add_section：添加一个章节</span><br><span class="line">remove_option：删除一个选项</span><br><span class="line">set：添加一个选项</span><br><span class="line">write：将ConfigParser兑现中的数据保存到文件中</span><br></pre></td></tr></table></figure>

<p>方法测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">11</span>]: cf.remove_section(<span class="string">'client'</span>)</span><br><span class="line">Out[<span class="number">11</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: cf.write(open(<span class="string">'my.ini'</span>, <span class="string">'w'</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: cf.add_section(<span class="string">'client'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: cf.set(<span class="string">'client'</span>,<span class="string">'port'</span>,<span class="string">'3306'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: cf.set(<span class="string">'client'</span>,<span class="string">'user'</span>,<span class="string">'mysql'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: cf.set(<span class="string">'client'</span>,<span class="string">'password'</span>,<span class="string">'mysql'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: cf.set(<span class="string">'client'</span>,<span class="string">'host'</span>,<span class="string">'127.0.0.1'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: cf.write(open(<span class="string">'my.ini'</span>,<span class="string">'w'</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">19</span>]: cf.remove_option(<span class="string">'client'</span>,<span class="string">'host'</span>)</span><br><span class="line">Out[<span class="number">19</span>: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: cf.write(open(<span class="string">'my.ini'</span>,<span class="string">'w'</span>))</span><br></pre></td></tr></table></figure>

<h3 id="三、查找文件"><a href="#三、查找文件" class="headerlink" title="三、查找文件"></a>三、查找文件</h3><h4 id="1、使用fnmatch找到特定文件"><a href="#1、使用fnmatch找到特定文件" class="headerlink" title="1、使用fnmatch找到特定文件"></a>1、使用fnmatch找到特定文件</h4><p>fnmatch.fnmatch()函数一次只能处理一个文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> fnmatch</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>):</span><br><span class="line">    <span class="keyword">if</span> os.path.isfile(item):</span><br><span class="line">        <span class="comment"># if fnmatch.fnmatch(item, '*.jpg'):</span></span><br><span class="line">        <span class="keyword">if</span> fnmatch.fnmatch(item, <span class="string">'[a-e]*'</span>):</span><br><span class="line">        <span class="comment"># if fnmatch.fnmatch(item, '[a-g]?.txt'):</span></span><br><span class="line">        <span class="comment"># if fnmatch.fnmatch(item, '[!a-c]*'):</span></span><br><span class="line">            print(item)</span><br></pre></td></tr></table></figure>

<p>fnmatch.filter()函数一次可以处理多个文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> fnmatch</span><br><span class="line"></span><br><span class="line">items = os.listdir(<span class="string">'.'</span>)</span><br><span class="line">files = fnmatch.filter(items, <span class="string">'[a-c]*'</span>)</span><br><span class="line">print(files)</span><br></pre></td></tr></table></figure>

<h4 id="2、使用glob找到特定文件"><a href="#2、使用glob找到特定文件" class="headerlink" title="2、使用glob找到特定文件"></a>2、使用glob找到特定文件</h4><p>标准库glob的作用相当于os.listdir()加上fnmatch。使用glob以后，不需要调用os.listdir()获取文件列表，直接通过模式匹配即可。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"></span><br><span class="line">files = glob.glob(<span class="string">'*.jpg'</span>)</span><br><span class="line">print(files)</span><br></pre></td></tr></table></figure>

<h4 id="案例3：找到目录下最大（或最老）的10个文件"><a href="#案例3：找到目录下最大（或最老）的10个文件" class="headerlink" title="案例3：找到目录下最大（或最老）的10个文件"></a>案例3：找到目录下最大（或最老）的10个文件</h4><h3 id="四、高级文件处理接口shutil"><a href="#四、高级文件处理接口shutil" class="headerlink" title="四、高级文件处理接口shutil"></a>四、高级文件处理接口shutil</h3><h4 id="1、复制文件和文件夹"><a href="#1、复制文件和文件夹" class="headerlink" title="1、复制文件和文件夹"></a>1、复制文件和文件夹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutil.copy(file1,file2)</span><br><span class="line">shuti.copytree(dir1, dir2)</span><br></pre></td></tr></table></figure>

<h4 id="2、文件和文件夹的移动与重命名"><a href="#2、文件和文件夹的移动与重命名" class="headerlink" title="2、文件和文件夹的移动与重命名"></a>2、文件和文件夹的移动与重命名</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutil.move(file1, file2)</span><br><span class="line">shutil.move(file, dir)</span><br></pre></td></tr></table></figure>

<h4 id="3、删除目录"><a href="#3、删除目录" class="headerlink" title="3、删除目录"></a>3、删除目录</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutil.rmtree(dir)</span><br><span class="line">os.unlink(file)</span><br></pre></td></tr></table></figure>

<h3 id="五、文件内容管理"><a href="#五、文件内容管理" class="headerlink" title="五、文件内容管理"></a>五、文件内容管理</h3><h4 id="1、目录和文件对比"><a href="#1、目录和文件对比" class="headerlink" title="1、目录和文件对比"></a>1、目录和文件对比</h4><p>filecmp模块包含了比较目录和文件的操作。</p>
<p>目录结构如下，其中，a.txt和c.txt内容是一样的，a_copy.txt是a.txt的拷贝。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">├─dir1</span><br><span class="line">│  │  a.txt</span><br><span class="line">│  │  a_copy.txt</span><br><span class="line">│  │  b.txt</span><br><span class="line">│  │  c.txt</span><br><span class="line">│  └─subdir1</span><br><span class="line">│          sa.txt</span><br><span class="line">└─dir2</span><br><span class="line">    │  a.txt</span><br><span class="line">    │  b.txt</span><br><span class="line">    │  c.txt</span><br><span class="line">    ├─subdir1</span><br><span class="line">    │      sb.txt</span><br><span class="line">    └─subdir2</span><br></pre></td></tr></table></figure>

<h4 id="（1）比较两个文件"><a href="#（1）比较两个文件" class="headerlink" title="（1）比较两个文件"></a>（1）比较两个文件</h4><p>使用filecmp模块的cmp函数比较两个文件是否相同，如果文件相同则返回True，否则返回False。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> filecmp</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: cd dir1</span><br><span class="line">E:\git-project\python_project\cloud33\Python常用模块\compare\dir1</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: filecmp.cmp(<span class="string">'a.txt'</span>,<span class="string">'b.txt'</span>)</span><br><span class="line">Out[<span class="number">3</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: filecmp.cmp(<span class="string">'a.txt'</span>,<span class="string">'c.txt'</span>)</span><br><span class="line">Out[<span class="number">4</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: filecmp.cmp(<span class="string">'a.txt'</span>,<span class="string">'a_copy.txt'</span>)</span><br><span class="line">Out[<span class="number">5</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h4 id="（2）比较多个文件"><a href="#（2）比较多个文件" class="headerlink" title="（2）比较多个文件"></a>（2）比较多个文件</h4><p>filecmp目录下还有一个名为cmpfiles的函数，该函数用来同时比较两个不同的目录下的多个文件，并且返回一个三元组，分别包含相同的文件、不同的文件和无法比较的文件。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">6</span>]: filecmp.cmpfiles(<span class="string">'dir1'</span>,<span class="string">'dir2'</span>,[<span class="string">'a.txt'</span>,<span class="string">'b.txt'</span>,<span class="string">'c.txt'</span>,<span class="string">'a_copy.txt'</span>])</span><br><span class="line">Out[<span class="number">6</span>]: ([<span class="string">'a.txt'</span>, <span class="string">'b.txt'</span>, <span class="string">'c.txt'</span>], [], [<span class="string">'a_copy.txt'</span>])</span><br></pre></td></tr></table></figure>

<p>cmpfiles函数同时用来比较两个目录下的文件，也可以使用该函数比较两个目录。但是，在比较两个目录时，需要通过参数指定可能的文件，因此比较繁琐。</p>
<h4 id="（3）比较目录"><a href="#（3）比较目录" class="headerlink" title="（3）比较目录"></a>（3）比较目录</h4><p>filecmp中还有一个名为dircmp的函数，用来比较两个目录。调用dircmp函数以后，会返回一个dircmp类的对象，该对象保存了诸多属性，我们可以通过查看这些属性获取目录之间的差异。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">7</span>]: d = filecmp.dircmp(<span class="string">'dir1'</span>,<span class="string">'dir2'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: d.report()</span><br><span class="line">diff dir1 dir2</span><br><span class="line">Only <span class="keyword">in</span> dir1 : [<span class="string">'a_copy.txt'</span>]</span><br><span class="line">Only <span class="keyword">in</span> dir2 : [<span class="string">'subdir2'</span>]</span><br><span class="line">Identical files : [<span class="string">'c.txt'</span>]</span><br><span class="line">Differing files : [<span class="string">'a.txt'</span>, <span class="string">'b.txt'</span>]</span><br><span class="line">Common subdirectories : [<span class="string">'subdir1'</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: d.left_list</span><br><span class="line">Out[<span class="number">9</span>]: [<span class="string">'a.txt'</span>, <span class="string">'a_copy.txt'</span>, <span class="string">'b.txt'</span>, <span class="string">'c.txt'</span>, <span class="string">'subdir1'</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: d.right_list</span><br><span class="line">Out[<span class="number">10</span>]: [<span class="string">'a.txt'</span>, <span class="string">'b.txt'</span>, <span class="string">'c.txt'</span>, <span class="string">'subdir1'</span>, <span class="string">'subdir2'</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: d.left_only</span><br><span class="line">Out[<span class="number">11</span>]: [<span class="string">'a_copy.txt'</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: d.right_only</span><br><span class="line">Out[<span class="number">12</span>]: [<span class="string">'subdir2'</span>]</span><br></pre></td></tr></table></figure>

<h4 id="2、MD5校验和比较"><a href="#2、MD5校验和比较" class="headerlink" title="2、MD5校验和比较"></a>2、MD5校验和比较</h4><p>校验码是通过散列函数计算而成，是一种从任何数据中创建小的数字“指纹”的方法。散列函数把消息或数据压缩成摘要，使得数据量变小，便于进行比较。MD5是目前使用最广泛的散列算法。</p>
<p>MD5哈希一般用于检查文件的完整性，尤其常用于检查文件传输、磁盘错误或其他情况下文件的正确性。</p>
<p>Linux下计算一个文件的MD5校验码，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@192 demo]# md5sum a.txt</span><br><span class="line">d41d8cd98f00b204e9800998ecf8427e  a.txt</span><br></pre></td></tr></table></figure>

<p>在Python中计算文件的MD5校验码也非常简单，使用标准库hashlib模块即可。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">d = hashlib.md5()</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'b.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        d.update(line.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">print(d.hexdigest())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者可以这样（最常见的写法，常用于图片的命名）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hashlib.md5(<span class="string">b'123'</span>).hexdigest()</span><br><span class="line"><span class="string">'202cb962ac59075b964b07152d234b70'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用hash.new()这个一般方法，hashlib.new(name[, data])，name传入的是哈希加密算法的名称，如md5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hashlib.new(<span class="string">'md5'</span>, <span class="string">b'123'</span>).hexdigest()</span><br><span class="line"><span class="string">'202cb962ac59075b964b07152d234b70'</span></span><br></pre></td></tr></table></figure>

<h3 id="六、使用Python管理压缩包"><a href="#六、使用Python管理压缩包" class="headerlink" title="六、使用Python管理压缩包"></a>六、使用Python管理压缩包</h3><h4 id="1、tarfile"><a href="#1、tarfile" class="headerlink" title="1、tarfile"></a>1、tarfile</h4><h5 id="（1）读取tar包"><a href="#（1）读取tar包" class="headerlink" title="（1）读取tar包"></a>（1）读取tar包</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tarfile.open(<span class="string">'cmake-3.17.0.tar.gz'</span>) <span class="keyword">as</span> t:</span><br><span class="line">    <span class="keyword">for</span> member <span class="keyword">in</span> t.getmembers():</span><br><span class="line">        print(member.name)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">with</span> tarfile.open(<span class="string">'cmake-3.17.0.tar.gz'</span>) <span class="keyword">as</span> t:</span><br><span class="line">t.extractall()</span><br><span class="line">t.extract(<span class="string">'cmake-3.17.0/Help'</span>,<span class="string">'a'</span>)</span><br></pre></td></tr></table></figure>

<p>常用方法说明：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getmembers():获取tar包中的文件列表</span><br><span class="line">member.name:获取tar包中文件的文件名</span><br><span class="line">extract(member, path):提取单个文件</span><br><span class="line">extractall(path, memebers):提取所有的文件</span><br></pre></td></tr></table></figure>

<h5 id="（2）创建tar包"><a href="#（2）创建tar包" class="headerlink" title="（2）创建tar包"></a>（2）创建tar包</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tarfile.open(<span class="string">'readme.tar'</span>, mode=<span class="string">'w'</span>) <span class="keyword">as</span> out:</span><br><span class="line">    out.add(<span class="string">'read.txt'</span>)</span><br></pre></td></tr></table></figure>

<h5 id="（3）读取与创建压缩包"><a href="#（3）读取与创建压缩包" class="headerlink" title="（3）读取与创建压缩包"></a>（3）读取与创建压缩包</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tarfile.open(<span class="string">'tarfile_add.tar'</span>,mode=<span class="string">'r:gz'</span>) <span class="keyword">as</span> out:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tarfile.open(<span class="string">'tarfile_add.tar'</span>,mode=<span class="string">'r:bz2'</span>) <span class="keyword">as</span> out:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h4 id="案例4：备份指定文件到压缩包中"><a href="#案例4：备份指定文件到压缩包中" class="headerlink" title="案例4：备份指定文件到压缩包中"></a>案例4：备份指定文件到压缩包中</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> fnmatch</span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_file_math</span><span class="params">(filename, patterns)</span>:</span></span><br><span class="line">    <span class="string">'''查找特定类型的文件'''</span></span><br><span class="line">    <span class="keyword">for</span> pattern <span class="keyword">in</span> patterns:</span><br><span class="line">        <span class="keyword">if</span> fnmatch.fnmatch(filename, pattern):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_files</span><span class="params">(root, patterns=[<span class="string">'*'</span>])</span>:</span></span><br><span class="line">    <span class="keyword">for</span> root, dirnames, filenames <span class="keyword">in</span> os.walk(root):</span><br><span class="line">        <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">            <span class="keyword">if</span> is_file_math(filename, patterns):</span><br><span class="line">                <span class="keyword">yield</span> os.path.join(root, filename)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">patterns = [<span class="string">'*.txt'</span>,<span class="string">'*.md'</span>]</span><br><span class="line">now = datetime.datetime.now().strftime(<span class="string">'%Y_%m_%d_%H_%M_%S'</span>)</span><br><span class="line">filename = <span class="string">'backup_all_file_&#123;0&#125;.tar.gz'</span>.format(now)</span><br><span class="line"><span class="keyword">with</span> tarfile.open(filename, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> find_files(<span class="string">'.'</span>, patterns):</span><br><span class="line">        f.add(item)</span><br></pre></td></tr></table></figure>

<h4 id="2、zipfile"><a href="#2、zipfile" class="headerlink" title="2、zipfile"></a>2、zipfile</h4><h5 id="（1）读取zip文件"><a href="#（1）读取zip文件" class="headerlink" title="（1）读取zip文件"></a>（1）读取zip文件</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"></span><br><span class="line">demo_zip = zipfile.ZipFile(<span class="string">'read.zip'</span>)</span><br><span class="line">print(demo_zip.namelist())</span><br><span class="line">demo_zip.extractall(<span class="string">'1'</span>)</span><br><span class="line">demo_zip.extract(<span class="string">'a.jpg'</span>,<span class="string">'2'</span>)</span><br></pre></td></tr></table></figure>

<p>常用方法说明：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">namelist():返回zip文件中包含的所有文件和文件夹的字符串列表</span><br><span class="line">extract(filename, path)：从zip文件中提取单个文件</span><br><span class="line">extractall(path)：从zip文件中提取所有文件</span><br></pre></td></tr></table></figure>

<h5 id="（2）创建zip文件"><a href="#（2）创建zip文件" class="headerlink" title="（2）创建zip文件"></a>（2）创建zip文件</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"></span><br><span class="line">newZip = zipfile.ZipFile(<span class="string">'new.zip'</span>,mode=<span class="string">'w'</span>)</span><br><span class="line">newZip.write(<span class="string">'a.jpg'</span>)</span><br><span class="line">newZip.close()</span><br></pre></td></tr></table></figure>

<h5 id="（3）Python命令行调用zipfile"><a href="#（3）Python命令行调用zipfile" class="headerlink" title="（3）Python命令行调用zipfile"></a>（3）Python命令行调用zipfile</h5><p>zipfile模块提供的命令行接口包含的选项：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-l:显示zip格式压缩包中的文件列表</span><br><span class="line">-e:提取zip格式的压缩包</span><br><span class="line">-c:创建zip格式的压缩包</span><br><span class="line">-t:验证文件是不是一个有效的zip格式压缩包</span><br></pre></td></tr></table></figure>

<p>示例如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建zip文件</span></span><br><span class="line">python -m zipfile -c new1.zip archive_tar.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看zip文件列表</span></span><br><span class="line">python -m zipfile -l new1.zip</span><br><span class="line">File Name                                             Modified             Size</span><br><span class="line">archive_tar.py                                 <span class="number">2020</span><span class="number">-04</span><span class="number">-26</span> <span class="number">16</span>:<span class="number">32</span>:<span class="number">54</span>          <span class="number">239</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取zip文件到指定目录</span></span><br><span class="line">python -m zipfile -e new1.zip new_dir</span><br></pre></td></tr></table></figure>

<h4 id="3、shutil创建和读取压缩包"><a href="#3、shutil创建和读取压缩包" class="headerlink" title="3、shutil创建和读取压缩包"></a>3、shutil创建和读取压缩包</h4><p>shutil支持的格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">print(shutil.get_archive_formats())</span><br><span class="line"></span><br><span class="line">[(<span class="string">'bztar'</span>, <span class="string">"bzip2'ed tar-file"</span>), (<span class="string">'gztar'</span>, <span class="string">"gzip'ed tar-file"</span>), (<span class="string">'tar'</span>, <span class="string">'uncompressed tar file'</span>), (<span class="string">'xztar'</span>, <span class="string">"xz'ed tar-file"</span>), (<span class="string">'zip'</span>, <span class="string">'ZIP file'</span>)]</span><br></pre></td></tr></table></figure>

<h5 id="（1）创建压缩包"><a href="#（1）创建压缩包" class="headerlink" title="（1）创建压缩包"></a>（1）创建压缩包</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参数1：生成的压缩包文件名</span></span><br><span class="line"><span class="comment"># 参数2：压缩包的格式</span></span><br><span class="line"><span class="comment"># 参数3：压缩的目录</span></span><br><span class="line">shutil.make_archive(<span class="string">'a.jpg'</span>,<span class="string">'gztar'</span>, <span class="string">'ddd'</span>)</span><br></pre></td></tr></table></figure>

<h5 id="（2）解压"><a href="#（2）解压" class="headerlink" title="（2）解压"></a>（2）解压</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参数1：需要解压的压缩包</span></span><br><span class="line"><span class="comment"># 参数2：解压的目录</span></span><br><span class="line">print(shutil.unpack_archive(<span class="string">'a.jpg.tar.gz'</span>,<span class="string">'jpg'</span>))</span><br></pre></td></tr></table></figure>

<h3 id="七、Python执行外部命令"><a href="#七、Python执行外部命令" class="headerlink" title="七、Python执行外部命令"></a>七、Python执行外部命令</h3><h4 id="1、subprocess模块简介"><a href="#1、subprocess模块简介" class="headerlink" title="1、subprocess模块简介"></a>1、subprocess模块简介</h4><p>这个模块用来创建和管理子进程。它提供了高层次的接口，用来替换os.system()、os.spawn*()、os.popen*()、os.popen2.<em>()和commands.\</em>等模块和函数。</p>
<p>subprocess提供了一个名为Popen的类启动和设置子进程的参数，由于这个类比较复杂，subprosess还提供了若干便利的函数，这些函数都是对Popen类的封装。</p>
<h4 id="2、subprocess模块的便利函数"><a href="#2、subprocess模块的便利函数" class="headerlink" title="2、subprocess模块的便利函数"></a>2、subprocess模块的便利函数</h4><h5 id="（1）call"><a href="#（1）call" class="headerlink" title="（1）call"></a>（1）call</h5><p>call函数的定义如下</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subprocess.call(args, *, stdin=None, stdout=None, stderr=None, shell=False)</span><br></pre></td></tr></table></figure>

<p>示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> subprocess                                                                     </span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: subprocess.call([<span class="string">'ls'</span>,<span class="string">'-l'</span>])                                                          </span><br><span class="line">总用量 <span class="number">8</span></span><br><span class="line">-rw-------. <span class="number">1</span> root root <span class="number">2049</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. <span class="number">1</span> root root <span class="number">2077</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> initial-setup-ks.cfg</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root   <span class="number">21</span> <span class="number">4</span>月  <span class="number">22</span> <span class="number">16</span>:<span class="number">32</span> os</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 公共</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 模板</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 视频</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 图片</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 文档</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 下载</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 音乐</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 桌面</span><br><span class="line">Out[<span class="number">2</span>]: <span class="number">0</span></span><br><span class="line">     </span><br><span class="line">In [<span class="number">3</span>]: subprocess.call(<span class="string">'exit 1'</span>, shell=<span class="literal">True</span>)                                             </span><br><span class="line">Out[<span class="number">3</span>]: <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h5 id="（2）check-call"><a href="#（2）check-call" class="headerlink" title="（2）check_call"></a>（2）check_call</h5><p>check_all函数的作用与call函数类似，区别在于异常情况下返回的形式不同。</p>
<p>对于call函数，工程师通过捕获call命令的返回值判断命令是否执行成功，如果成功则返回0，否则的话返回非0。对于check_call函数，如果执行成功，返回0，如果执行失败，抛出subprocess.CallProseccError异常，示例如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">6</span>]: subprocess.check_call([<span class="string">'ls'</span>,<span class="string">'-l'</span>])                                                    </span><br><span class="line">总用量 <span class="number">8</span></span><br><span class="line">-rw-------. <span class="number">1</span> root root <span class="number">2049</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. <span class="number">1</span> root root <span class="number">2077</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> initial-setup-ks.cfg</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root   <span class="number">21</span> <span class="number">4</span>月  <span class="number">22</span> <span class="number">16</span>:<span class="number">32</span> os</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 公共</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 模板</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 视频</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 图片</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 文档</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 下载</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 音乐</span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root    <span class="number">6</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">2019</span> 桌面</span><br><span class="line">Out[<span class="number">6</span>]: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: subprocess.check_call(<span class="string">'lsljdl'</span>, shell=<span class="literal">True</span>)                                           </span><br><span class="line">/bin/sh: lsljdl: 未找到命令</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">CalledProcessError                        Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-7</span><span class="number">-885</span>ea94380a9&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; 1 subprocess.check_call('lsljdl', shell=True)</span><br><span class="line"></span><br><span class="line">/usr/local/python3/lib/python3<span class="number">.8</span>/subprocess.py <span class="keyword">in</span> check_call(*popenargs, **kwargs)</span><br><span class="line">    <span class="number">362</span>         <span class="keyword">if</span> cmd <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="number">363</span>             cmd = popenargs[<span class="number">0</span>]</span><br><span class="line">--&gt; 364         raise CalledProcessError(retcode, cmd)</span><br><span class="line">    <span class="number">365</span>     <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="number">366</span> </span><br><span class="line"></span><br><span class="line">CalledProcessError: Command <span class="string">'lsljdl'</span> returned non-zero exit status <span class="number">127.</span></span><br></pre></td></tr></table></figure>

<h5 id="（3）check-output"><a href="#（3）check-output" class="headerlink" title="（3）check_output"></a>（3）check_output</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">8</span>]: output = subprocess.check_output([<span class="string">'df'</span>,<span class="string">'-h'</span>])                                         </span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: print(output.decode())                                                               </span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/cl-root   <span class="number">37</span>G  <span class="number">5.1</span>G   <span class="number">32</span>G   <span class="number">14</span>% /</span><br><span class="line">devtmpfs             <span class="number">897</span>M     <span class="number">0</span>  <span class="number">897</span>M    <span class="number">0</span>% /dev</span><br><span class="line">tmpfs                <span class="number">912</span>M   <span class="number">84</span>K  <span class="number">912</span>M    <span class="number">1</span>% /dev/shm</span><br><span class="line">tmpfs                <span class="number">912</span>M  <span class="number">9.0</span>M  <span class="number">903</span>M    <span class="number">1</span>% /run</span><br><span class="line">tmpfs                <span class="number">912</span>M     <span class="number">0</span>  <span class="number">912</span>M    <span class="number">0</span>% /sys/fs/cgroup</span><br><span class="line">/dev/sda1           <span class="number">1014</span>M  <span class="number">173</span>M  <span class="number">842</span>M   <span class="number">18</span>% /boot</span><br><span class="line">tmpfs                <span class="number">183</span>M   <span class="number">16</span>K  <span class="number">183</span>M    <span class="number">1</span>% /run/user/<span class="number">42</span></span><br><span class="line">tmpfs                <span class="number">183</span>M     <span class="number">0</span>  <span class="number">183</span>M    <span class="number">0</span>% /run/user/<span class="number">0</span></span><br><span class="line"></span><br><span class="line">                                                                                       </span><br><span class="line">In [<span class="number">10</span>]: lines = output.decode().split(<span class="string">'\n'</span>)                                                  </span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: lines                                                                           </span><br><span class="line">Out[<span class="number">11</span>]: </span><br><span class="line">[<span class="string">'文件系统             容量  已用  可用 已用% 挂载点'</span>,</span><br><span class="line"> <span class="string">'/dev/mapper/cl-root   37G  5.1G   32G   14% /'</span>,</span><br><span class="line"> <span class="string">'devtmpfs             897M     0  897M    0% /dev'</span>,</span><br><span class="line"> <span class="string">'tmpfs                912M   84K  912M    1% /dev/shm'</span>,</span><br><span class="line"> <span class="string">'tmpfs                912M  9.0M  903M    1% /run'</span>,</span><br><span class="line"> <span class="string">'tmpfs                912M     0  912M    0% /sys/fs/cgroup'</span>,</span><br><span class="line"> <span class="string">'/dev/sda1           1014M  173M  842M   18% /boot'</span>,</span><br><span class="line"> <span class="string">'tmpfs                183M   16K  183M    1% /run/user/42'</span>,</span><br><span class="line"> <span class="string">'tmpfs                183M     0  183M    0% /run/user/0'</span>,</span><br><span class="line"> <span class="string">''</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: <span class="keyword">for</span> line <span class="keyword">in</span> lines[<span class="number">1</span>:<span class="number">-1</span>]: </span><br><span class="line">    ...:     <span class="keyword">if</span> line: </span><br><span class="line">    ...:         print(line.split()[<span class="number">-2</span>]) </span><br><span class="line">    ...:                                                                                 t</span><br><span class="line"><span class="number">14</span>%</span><br><span class="line"><span class="number">0</span>%</span><br><span class="line"><span class="number">1</span>%</span><br><span class="line"><span class="number">1</span>%</span><br><span class="line"><span class="number">0</span>%</span><br><span class="line"><span class="number">18</span>%</span><br><span class="line"><span class="number">1</span>%</span><br><span class="line"><span class="number">0</span>%</span><br></pre></td></tr></table></figure>

<h4 id="3、subprocess模块的Popen类"><a href="#3、subprocess模块的Popen类" class="headerlink" title="3、subprocess模块的Popen类"></a>3、subprocess模块的Popen类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">execute_cmd</span><span class="params">(cmd)</span>:</span></span><br><span class="line">    p = subprocess.Popen(cmd, shell=<span class="literal">True</span>,</span><br><span class="line">                         stdin=subprocess.PIPE,</span><br><span class="line">                         stdout=subprocess.PIPE,</span><br><span class="line">                         stderr=subprocess.PIPE)</span><br><span class="line">    stdout, stderr = p.communicate()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> p.returncode != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> p.returncode, stderr</span><br><span class="line">    <span class="keyword">return</span> p.returncode, stdout</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">execute_cmd(<span class="string">'ls'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="八、综合案例：使用Python部署MongoDB"><a href="#八、综合案例：使用Python部署MongoDB" class="headerlink" title="八、综合案例：使用Python部署MongoDB"></a>八、综合案例：使用Python部署MongoDB</h3><p>看一个综合案例，使用Python不俗MongoDB数据库。在这个例子中，将会用到各种与系统管理相关的标准库，包括os、os.path、shutil、tarfile和subprocess模块。</p>
<blockquote>
<p>假设当前目录下存在一个MongoDB安装包，我们的Python程序需要将他解压到当前目录的mongo目录下，并且当前目录创建一个mongodata目录用老保存MongoDB的数据库文件。</p>
</blockquote>
<p>在部署MongoDB数据库之前，当前目录下的文件结构如下：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── auto_install_mongodb.py</span><br><span class="line">└── ./mongodb-linux-x86_64-rhel70-4.2.3.tgz</span><br></pre></td></tr></table></figure>

<p>程序部署完成后，当前目录的文件结构大致如下：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── ./auto_install_mongodb.py</span><br><span class="line">├── ./mongo</span><br><span class="line">│   ├── ./mongo/bin</span><br><span class="line">│   │   ├── ./mongo/bin/bsondump</span><br><span class="line">│   │   ├── ./mongo/bin/install_compass</span><br><span class="line">│   │   ├── ./mongo/bin/mongo</span><br><span class="line">│   │   ├── ./mongo/bin/mongod</span><br><span class="line">│   │   ├── ./mongo/bin/mongodump</span><br><span class="line">│   │   ├── ./mongo/bin/mongoexport</span><br><span class="line">│   │   ├── ./mongo/bin/mongofiles</span><br><span class="line">│   │   ├── ./mongo/bin/mongoimport</span><br><span class="line">│   │   ├── ./mongo/bin/mongoreplay</span><br><span class="line">│   │   ├── ./mongo/bin/mongorestore</span><br><span class="line">│   │   ├── ./mongo/bin/mongos</span><br><span class="line">│   │   ├── ./mongo/bin/mongostat</span><br><span class="line">│   │   └── ./mongo/bin/mongotop</span><br><span class="line">│   ├── ./mongo/LICENSE-Community.txt</span><br><span class="line">│   ├── ./mongo/MPL-2</span><br><span class="line">│   ├── ./mongo/README</span><br><span class="line">│   ├── ./mongo/THIRD-PARTY-NOTICES</span><br><span class="line">│   └── ./mongo/THIRD-PARTY-NOTICES.gotools</span><br><span class="line">├── ./mongodata</span><br><span class="line">│   ├── ./mongodata/collection-0-4813754152483353608.wt</span><br><span class="line">│   ├── ./mongodata/collection-2-4813754152483353608.wt</span><br><span class="line">│   ├── ./mongodata/collection-4-4813754152483353608.wt</span><br><span class="line">│   ├── ./mongodata/diagnostic.data</span><br><span class="line">│   │   ├── ./mongodata/diagnostic.data/metrics.2020-04-27T10-17-57Z-00000</span><br><span class="line">│   │   └── ./mongodata/diagnostic.data/metrics.interim</span><br><span class="line">│   ├── ./mongodata/index-1-4813754152483353608.wt</span><br><span class="line">│   ├── ./mongodata/index-3-4813754152483353608.wt</span><br><span class="line">│   ├── ./mongodata/index-5-4813754152483353608.wt</span><br><span class="line">│   ├── ./mongodata/index-6-4813754152483353608.wt</span><br><span class="line">│   ├── ./mongodata/journal</span><br><span class="line">│   │   ├── ./mongodata/journal/WiredTigerLog.0000000001</span><br><span class="line">│   │   ├── ./mongodata/journal/WiredTigerPreplog.0000000001</span><br><span class="line">│   │   └── ./mongodata/journal/WiredTigerPreplog.0000000002</span><br><span class="line">│   ├── ./mongodata/_mdb_catalog.wt</span><br><span class="line">│   ├── ./mongodata/mongod.lock</span><br><span class="line">│   ├── ./mongodata/mongod.log</span><br><span class="line">│   ├── ./mongodata/sizeStorer.wt</span><br><span class="line">│   ├── ./mongodata/storage.bson</span><br><span class="line">│   ├── ./mongodata/WiredTiger</span><br><span class="line">│   ├── ./mongodata/WiredTigerLAS.wt</span><br><span class="line">│   ├── ./mongodata/WiredTiger.lock</span><br><span class="line">│   ├── ./mongodata/WiredTiger.turtle</span><br><span class="line">│   └── ./mongodata/WiredTiger.wt</span><br><span class="line">└── ./mongodb-linux-x86_64-rhel70-4.2.3.tgz</span><br></pre></td></tr></table></figure>

<p>MongoDB下载地址如下：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://fastdl.mongodb.org/linux/mongodb-linux-s390x-rhel72-4.3.3.tgz</span><br></pre></td></tr></table></figure>

<p>MongoDB是当下最流行的文档数据库，具有很好的易用性。启动一个MongoDB数据库实例，只需要执行一下几条shell命令即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxf mongodb-linux-x86_64-rhel70-4.2.3.tgz</span><br><span class="line">mv mongodb-linux-x86_64-rhel70-4.2.3 mongo</span><br><span class="line">mkdir mongodata</span><br><span class="line">mongo/bin/mongod --fork --logpath mongodata/mongod.log --dbpath mongodata</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里给出的shell命令，只是为了便于不熟悉MongoDB的人了解MongoDB数据库的启动过程，还有很多的情况没有考虑。例如，要将当前目录下的MongoDB安装包解压到当前目录下的mongo目录中，但是当前目录下已经存在一个名为mongo的目录，则会报错</p>
</blockquote>
<p>下面的程序时使用Python部署MongoDB数据库的完整代码，这段程序综合应用了很多与系统管理相关的模块。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">execute_cmd</span><span class="params">(cmd)</span>:</span></span><br><span class="line">    <span class="string">'''执行shell命令'''</span></span><br><span class="line">    p = subprocess.Popen(cmd, shell=<span class="literal">True</span>,</span><br><span class="line">                         stdin=subprocess.PIPE,</span><br><span class="line">                         stdout=subprocess.PIPE,</span><br><span class="line">                         stderr=subprocess.PIPE)</span><br><span class="line">    stdout, stderr = p.communicate()</span><br><span class="line">    <span class="keyword">if</span> p.returncode != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> p.returncode, stderr</span><br><span class="line">    <span class="keyword">return</span> p.returncode, stdout</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unpackage_mongo</span><span class="params">(package, package_dir)</span>:</span></span><br><span class="line">    unpackage_dir = os.path.splitext(package)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(unpackage_dir):</span><br><span class="line">        shutil.rmtree(unpackage_dir)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(package_dir):</span><br><span class="line">        shutil.rmtree(package_dir)</span><br><span class="line">    <span class="comment"># 解压</span></span><br><span class="line">    t = tarfile.open(package, <span class="string">'r:gz'</span>)</span><br><span class="line">    t.extractall(<span class="string">'.'</span>)</span><br><span class="line">    print(<span class="string">'tar is ok.'</span>)</span><br><span class="line">    <span class="comment"># 重命名mongodb-linux-x86_64-rhel70-4.2.3为mongo</span></span><br><span class="line">    shutil.move(unpackage_dir, <span class="string">'mongo'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_datadir</span><span class="params">(data_dir)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(data_dir):</span><br><span class="line">        shutil.rmtree(data_dir)</span><br><span class="line">    os.mkdir(data_dir)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">format_mongod_commamd</span><span class="params">(package_dir, data_dir, logfile)</span>:</span></span><br><span class="line">    mongod = os.path.join(package_dir, <span class="string">'bin'</span>, <span class="string">'mongod'</span>)</span><br><span class="line">    mongod_format = <span class="string">"""&#123;0&#125; --fork --dbpath &#123;1&#125; --logpath &#123;2&#125;"""</span></span><br><span class="line">    <span class="keyword">return</span> mongod_format.format(mongod, data_dir, logfile)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_mongod</span><span class="params">(cmd)</span>:</span></span><br><span class="line">    returncode, out = execute_cmd(cmd)</span><br><span class="line">    <span class="keyword">if</span> returncode != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> SystemExit(<span class="string">'execute &#123;0&#125; error:&#123;1&#125;'</span>.format(cmd, out.decode()))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'execute &#123;0&#125; sucessfully.'</span>.format(cmd))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    package = <span class="string">'mongodb-linux-x86_64-rhel70-4.2.3.tgz'</span></span><br><span class="line">    cur_dir = os.path.abspath(<span class="string">'.'</span>)</span><br><span class="line">    package_dir = os.path.join(cur_dir, <span class="string">'mongo'</span>)</span><br><span class="line">    data_dir = os.path.join(cur_dir, <span class="string">'mongodata'</span>)</span><br><span class="line">    logfile = os.path.join(data_dir, <span class="string">'mongod.log'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(package):</span><br><span class="line">        <span class="keyword">raise</span> SystemExit(<span class="string">'&#123;0&#125; not found.'</span>.format(package))</span><br><span class="line"></span><br><span class="line">    unpackage_mongo(package, package_dir)</span><br><span class="line">    create_datadir(data_dir)</span><br><span class="line">    start_mongod(format_mongod_commamd(package_dir, data_dir, logfile))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>

<p>代码说明：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在这段过程中，我们首先在main函数中定义了几个变量，包括当前目录的路径，MongoDB二进制文件所在的路径、MongoDB数据目录所在的路径，以及MongoDB的日志问紧啊</span><br><span class="line"></span><br><span class="line">随后，我们判断MongoDB的安装包是否存在，如果不存在，则通过抛出SystemExit异常的方式结束程序</span><br><span class="line"></span><br><span class="line">在unpackage_mongo函数中，我们通过Python程序得到MongoDB安装包解压以后的目录。如果目录已经存在，则删除该目录。随后，我们使用tarfile解压MongoDB数据库，解压完成后，将命令重命名为mongo目录</span><br><span class="line"></span><br><span class="line">在create_datadir目录红，我们首先判断MongoDB数据库目录是否存在，如果存在，则删除该目录，随后在创建MongoDB数据库目录</span><br><span class="line"></span><br><span class="line">在start_mongod函数中，我们执行MongoDB数据库的启动命令启动MongoDB数据库。为了在Python代码中执行shell命令，我们使用了subprocess库，我们将subprocess库执行shell命令的瑞吉封装成execute_cmd函数，在执行shell命令时，直接调用该函数即可</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Maisy
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://pdxblog.top/Python%E5%AF%B9Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%AE%A1%E7%90%86.html" title="Python对Linux系统的管理">https://pdxblog.top/Python对Linux系统的管理.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Python%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E5%AD%97%E5%85%B8.html" rel="prev" title="Python数据类型之字典">
      <i class="fa fa-chevron-left"></i> Python数据类型之字典
    </a></div>
      <div class="post-nav-item">
    <a href="/Python3+Django3%E5%BC%80%E5%8F%91%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%BA%E5%91%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html" rel="next" title="Python3+Django3开发简单的人员管理系统">
      Python3+Django3开发简单的人员管理系统 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Python对Linux系统的管理"><span class="nav-number">1.</span> <span class="nav-text">Python对Linux系统的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、OS模块常用功能"><span class="nav-number">1.1.</span> <span class="nav-text">一、OS模块常用功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、os模块打开文件"><span class="nav-number">1.1.1.</span> <span class="nav-text">1、os模块打开文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、os模块对文件进行操作"><span class="nav-number">1.1.2.</span> <span class="nav-text">2、os模块对文件进行操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、os模块管理文件和目录"><span class="nav-number">1.1.3.</span> <span class="nav-text">3、os模块管理文件和目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、os模块管理文件权限"><span class="nav-number">1.1.4.</span> <span class="nav-text">4、os模块管理文件权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、os-path模块管理文件与路径"><span class="nav-number">1.1.5.</span> <span class="nav-text">5、os.path模块管理文件与路径</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）拆分路径"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">（1）拆分路径</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）构建路径"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">（2）构建路径</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（3）获取文件属性"><span class="nav-number">1.1.5.3.</span> <span class="nav-text">（3）获取文件属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（4）判断文件类型"><span class="nav-number">1.1.5.4.</span> <span class="nav-text">（4）判断文件类型</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6、os模块执行shell命令"><span class="nav-number">1.1.6.</span> <span class="nav-text">6、os模块执行shell命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#案例1：编写自动安装Python的脚本"><span class="nav-number">1.1.7.</span> <span class="nav-text">案例1：编写自动安装Python的脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7、os-walk函数遍历目录树"><span class="nav-number">1.1.8.</span> <span class="nav-text">7、os.walk函数遍历目录树</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#案例2：打印最常用的10条Linux命令"><span class="nav-number">1.1.9.</span> <span class="nav-text">案例2：打印最常用的10条Linux命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、使用ConfigParser类解析配置文件"><span class="nav-number">1.2.</span> <span class="nav-text">二、使用ConfigParser类解析配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、配置文件的格式"><span class="nav-number">1.2.1.</span> <span class="nav-text">1、配置文件的格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、ConfigParser类的使用方法"><span class="nav-number">1.2.2.</span> <span class="nav-text">2、ConfigParser类的使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）创建configParser对象"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">（1）创建configParser对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）读取配置文件内容"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">（2）读取配置文件内容</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（3）获取配置文件信息"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">（3）获取配置文件信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（4）修改配置文件"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">（4）修改配置文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、查找文件"><span class="nav-number">1.3.</span> <span class="nav-text">三、查找文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、使用fnmatch找到特定文件"><span class="nav-number">1.3.1.</span> <span class="nav-text">1、使用fnmatch找到特定文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、使用glob找到特定文件"><span class="nav-number">1.3.2.</span> <span class="nav-text">2、使用glob找到特定文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#案例3：找到目录下最大（或最老）的10个文件"><span class="nav-number">1.3.3.</span> <span class="nav-text">案例3：找到目录下最大（或最老）的10个文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、高级文件处理接口shutil"><span class="nav-number">1.4.</span> <span class="nav-text">四、高级文件处理接口shutil</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、复制文件和文件夹"><span class="nav-number">1.4.1.</span> <span class="nav-text">1、复制文件和文件夹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、文件和文件夹的移动与重命名"><span class="nav-number">1.4.2.</span> <span class="nav-text">2、文件和文件夹的移动与重命名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、删除目录"><span class="nav-number">1.4.3.</span> <span class="nav-text">3、删除目录</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、文件内容管理"><span class="nav-number">1.5.</span> <span class="nav-text">五、文件内容管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、目录和文件对比"><span class="nav-number">1.5.1.</span> <span class="nav-text">1、目录和文件对比</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（1）比较两个文件"><span class="nav-number">1.5.2.</span> <span class="nav-text">（1）比较两个文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（2）比较多个文件"><span class="nav-number">1.5.3.</span> <span class="nav-text">（2）比较多个文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（3）比较目录"><span class="nav-number">1.5.4.</span> <span class="nav-text">（3）比较目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、MD5校验和比较"><span class="nav-number">1.5.5.</span> <span class="nav-text">2、MD5校验和比较</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、使用Python管理压缩包"><span class="nav-number">1.6.</span> <span class="nav-text">六、使用Python管理压缩包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、tarfile"><span class="nav-number">1.6.1.</span> <span class="nav-text">1、tarfile</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）读取tar包"><span class="nav-number">1.6.1.1.</span> <span class="nav-text">（1）读取tar包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）创建tar包"><span class="nav-number">1.6.1.2.</span> <span class="nav-text">（2）创建tar包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（3）读取与创建压缩包"><span class="nav-number">1.6.1.3.</span> <span class="nav-text">（3）读取与创建压缩包</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#案例4：备份指定文件到压缩包中"><span class="nav-number">1.6.2.</span> <span class="nav-text">案例4：备份指定文件到压缩包中</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、zipfile"><span class="nav-number">1.6.3.</span> <span class="nav-text">2、zipfile</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）读取zip文件"><span class="nav-number">1.6.3.1.</span> <span class="nav-text">（1）读取zip文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）创建zip文件"><span class="nav-number">1.6.3.2.</span> <span class="nav-text">（2）创建zip文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（3）Python命令行调用zipfile"><span class="nav-number">1.6.3.3.</span> <span class="nav-text">（3）Python命令行调用zipfile</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、shutil创建和读取压缩包"><span class="nav-number">1.6.4.</span> <span class="nav-text">3、shutil创建和读取压缩包</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）创建压缩包"><span class="nav-number">1.6.4.1.</span> <span class="nav-text">（1）创建压缩包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）解压"><span class="nav-number">1.6.4.2.</span> <span class="nav-text">（2）解压</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#七、Python执行外部命令"><span class="nav-number">1.7.</span> <span class="nav-text">七、Python执行外部命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、subprocess模块简介"><span class="nav-number">1.7.1.</span> <span class="nav-text">1、subprocess模块简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、subprocess模块的便利函数"><span class="nav-number">1.7.2.</span> <span class="nav-text">2、subprocess模块的便利函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）call"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">（1）call</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）check-call"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">（2）check_call</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（3）check-output"><span class="nav-number">1.7.2.3.</span> <span class="nav-text">（3）check_output</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、subprocess模块的Popen类"><span class="nav-number">1.7.3.</span> <span class="nav-text">3、subprocess模块的Popen类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#八、综合案例：使用Python部署MongoDB"><span class="nav-number">1.8.</span> <span class="nav-text">八、综合案例：使用Python部署MongoDB</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Maisy"
      src="/images/author.jpg">
  <p class="site-author-name" itemprop="name">Maisy</p>
  <div class="site-description" itemprop="description">人的一生就是一个储蓄的过程，在奋斗的时候储存了希望；在耕耘的时候储存了一粒种子；在旅行的时候储存了风景；在微笑的时候储存了快乐。聪明的人善于储蓄，在漫长而短暂的人生旅途中，学会储蓄每一个闪光的瞬间，然后用它们酿成一杯美好的回忆，在四季的变幻与交替之间，散发浓香，珍藏一生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Gilbert2/Gilbert2.github.io" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Gilbert2&#x2F;Gilbert2.github.io" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/weixin_45636702" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_45636702" rel="noopener" target="_blank"><i class="fab fa-crosshairs fa-fw"></i>CSDN</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Maisy</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">289k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">4:23</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://cdn.busuanzi.ibruce.info/cdn/busuanzi/2.3/busuanzi.pure.mini.j"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_sphere.min.js"></script>


  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'yK6nF3Ng27WevBtHAbTkt8Jv-gzGzoHsz',
      appKey     : 'DXAxzx0igQL9KzyblmtXnVkh',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
