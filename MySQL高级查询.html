<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=2"><meta name=theme-color content=#222><meta name=generator content="Hexo 4.2.0"><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-next.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32-next.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16-next.png><link rel=mask-icon href=/images/logo.svg color=#222><meta name=msvalidate.01 content=true><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><link rel=stylesheet href=//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css><script id=hexo-configurations>
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"pdxblog.top","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"b2t":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":{"enable":true,"onlypost":false,"loadingImg":null},"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script><meta name=description content=MySQL><meta property=og:type content=article><meta property=og:title content=MySQL高级查询><meta property=og:url content=https://pdxblog.top/MySQL%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2.html><meta property=og:site_name content=Maisyの博客><meta property=og:description content=MySQL><meta property=og:locale content=zh_CN><meta property=og:image content="https://img-blog.csdnimg.cn/20200711174430202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYzNjcwMg==,size_16,color_FFFFFF,t_70"><meta property=article:published_time content=2020-07-10T16:00:00.000Z><meta property=article:modified_time content=2020-07-11T11:33:25.572Z><meta property=article:author content=Maisy><meta property=article:tag content=MySQL><meta name=twitter:card content=summary><meta name=twitter:image content="https://img-blog.csdnimg.cn/20200711174430202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYzNjcwMg==,size_16,color_FFFFFF,t_70"><link rel=canonical href=https://pdxblog.top/MySQL%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2.html><script id=page-configurations>
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script><title>MySQL高级查询 | Maisyの博客</title><noscript><style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style></noscript><link rel=alternate href=/atom.xml title=Maisyの博客 type=application/atom+xml></head><body itemscope itemtype=http://schema.org/WebPage><div class="container use-motion"><div class=headband></div><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class=site-meta><a href="/" class=brand rel=start><span class=logo-line-before><i></i></span><h1 class=site-title>Maisyの博客</h1><span class=logo-line-after><i></i></span></a><p class=site-subtitle itemprop=description>记录生活中的点点滴滴</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul id=menu class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel=section><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-top"><a href="/top/" rel=section><i class="fa fa-signal fa-fw"></i>排行榜</a></li><li class="menu-item menu-item-about"><a href="/about/" rel=section><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel=section><i class="fa fa-tags fa-fw"></i>标签<span class=badge>7</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel=section><i class="fa fa-th fa-fw"></i>分类<span class=badge>7</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel=section><i class="fa fa-archive fa-fw"></i>归档<span class=badge>69</span></a></li></ul></nav></div></header><div class=back-to-top><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class=main><div class=main-inner><div class=content-wrap><div class="content post posts-expand"><article itemscope itemtype=http://schema.org/Article class=post-block lang=zh-CN><link itemprop=mainEntityOfPage href=https://pdxblog.top/MySQL%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2.html><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=/images/author.jpg><meta itemprop=name content=Maisy><meta itemprop=description content=人的一生就是一个储蓄的过程，在奋斗的时候储存了希望；在耕耘的时候储存了一粒种子；在旅行的时候储存了风景；在微笑的时候储存了快乐。聪明的人善于储蓄，在漫长而短暂的人生旅途中，学会储蓄每一个闪光的瞬间，然后用它们酿成一杯美好的回忆，在四季的变幻与交替之间，散发浓香，珍藏一生></span> <span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content=Maisyの博客></span><header class=post-header><h1 class=post-title itemprop="name headline">MySQL高级查询</h1><div class=post-meta><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span> <span class=post-meta-item-text>发表于</span><time title="创建时间：2020-07-11 00:00:00 / 修改时间：19:33:25" itemprop="dateCreated datePublished" datetime=2020-07-11T00:00:00+08:00>2020-07-11</time></span> <span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder"></i></span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing><a href="/categories/MySQL/" itemprop=url rel=index><span itemprop=name>MySQL</span></a></span></span> <span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-comment"></i></span> <span class=post-meta-item-text>Valine：</span> <a title=valine href=/MySQL%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2.html#valine-comments itemprop=discussionUrl><span class="post-comments-count valine-comment-count" data-xid=/MySQL%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2.html itemprop=commentCount></span></a></span><br><span class=post-meta-item title=本文字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span> <span class=post-meta-item-text>本文字数：</span> <span>15k</span></span> <span class=post-meta-item title=阅读时长><span class=post-meta-item-icon><i class="far fa-clock"></i></span> <span class=post-meta-item-text>阅读时长 &asymp;</span> <span>14 分钟</span></span><div class=post-description>MySQL</div></div></header><div class=post-body itemprop=articleBody><h2 id=MySQL高级查询><a class=header-anchor href=#MySQL高级查询>¶</a>MySQL高级查询</h2><p>本章将介绍如何修改表结构和数据的增删改查，以及mysql中常用的函数和运算符的使用方法。</p><h3 id=一、DDL语句（修改表结构）><a class=header-anchor href=#一、DDL语句（修改表结构）>¶</a>一、DDL语句（修改表结构）</h3><h4 id=1、修改表><a class=header-anchor href=#1、修改表>¶</a>1、修改表</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line># 修改表名</span><br><span class=line>alter table 旧表名 rename 新表名;</span><br><span class=line></span><br><span class=line># 添加字段</span><br><span class=line>alter table 表名 add 字段名 数据类型[属性];</span><br><span class=line></span><br><span class=line># 修改字段</span><br><span class=line>alter table 表名 CHANGE 原字段名 新字段名 数据类型[属性];</span><br><span class=line></span><br><span class=line># 删除字段</span><br><span class=line>alter table 表名 drop 字段名;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre></td><td class=code><pre><span class=line>drop table if exists &#96;ttt&#96;;</span><br><span class=line># 创建表</span><br><span class=line>create table &#96;ttt&#96;(</span><br><span class=line>	&#96;sid&#96; int(4) not null auto_increment primary key,</span><br><span class=line>    &#96;sname&#96; varchar(20) not null</span><br><span class=line>);</span><br><span class=line></span><br><span class=line># 修改表名</span><br><span class=line>alter table teacher rename ttt;</span><br><span class=line></span><br><span class=line># 添加字段</span><br><span class=line>alter table ttt add &#96;sex&#96; char(2);</span><br><span class=line></span><br><span class=line># 修改字段</span><br><span class=line>alter table ttt CHANGE &#96;sex&#96; &#96;gender&#96; char(2);</span><br><span class=line></span><br><span class=line># 删除字段</span><br><span class=line>alter table ttt drop gender;</span><br></pre></td></tr></table></figure><h4 id=2、添加主键><a class=header-anchor href=#2、添加主键>¶</a>2、添加主键</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>alter table 表名 add CONSTRAINT 主键名</span><br><span class=line>PRIMARY KEY 表名(主键字段);</span><br></pre></td></tr></table></figure><p>如何设置grade表中gradeID字段为主键？</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>create table grade(</span><br><span class=line>	&#96;gradeID&#96; int(4) not null,</span><br><span class=line>	&#96;gradeName&#96; varchar(20) not null</span><br><span class=line>);</span><br><span class=line></span><br><span class=line>alter table grade add CONSTRAINT pk_grade</span><br><span class=line>PRIMARY KEY grage(&#96;gradeID&#96;);</span><br></pre></td></tr></table></figure><h4 id=3、添加外键><a class=header-anchor href=#3、添加外键>¶</a>3、添加外键</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>alter table 表名 ADD CONSTRAINT 外键名              FOREIGN KEY（外键字段）</span><br><span class=line>REFERENCES 关联表名（关联字段）;</span><br></pre></td></tr></table></figure><p>如何将student表的gradeId字段和grade表的gradeId字段建立外键关联？</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>alter table student add CONSTRAINT fk_student_grade</span><br><span class=line>FOREIGN KEY(&#96;gradeID&#96;)</span><br><span class=line>REFERENCES &#96;grade&#96;(&#96;gradeID&#96;);</span><br></pre></td></tr></table></figure><h4 id=4、小结><a class=header-anchor href=#4、小结>¶</a>4、小结</h4><p>阅读以下代码，哪些SQL语句可以实现修改表？</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>1）ALTER TABLE mybook RENAME book;</span><br><span class=line>2）ALTER TABLE book ADD author  varchar(10) NOT NULL;</span><br><span class=line>3）ALTER TABLE &#96;book&#96; ADD   &#96;pk_book&#96;  PRIMARY KEY &#96;book&#96;(&#96;bookId&#96;);</span><br><span class=line>4）ALTER TABLE &#96;book&#96; DROP &#96;author &#96;;</span><br></pre></td></tr></table></figure><blockquote><p>除了第3个，其他SQL语句都可以实现修改表。</p></blockquote><h4 id=5、上机练习><a class=header-anchor href=#5、上机练习>¶</a>5、上机练习</h4><h5 id=（1）创建数据表并实现对表的修改操作><a class=header-anchor href=#（1）创建数据表并实现对表的修改操作>¶</a>（1）创建数据表并实现对表的修改操作</h5><table><thead><tr><th>字段名称</th><th>字段说明</th><th>数据类型</th><th>长度</th><th>属性</th></tr></thead><tbody><tr><td>number</td><td>序号</td><td>INT</td><td>4</td><td>自增列</td></tr><tr><td>name</td><td>姓名</td><td>VARCHAR</td><td>50</td><td>非空</td></tr><tr><td>sex</td><td>性别</td><td>CHAR</td><td>2</td><td></td></tr><tr><td>bornDate</td><td>出生日期</td><td>DATETIME</td><td></td><td></td></tr></tbody></table><p>需求说明：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>在test数据库中创建person表</span><br><span class=line>将表名修改为tb_person</span><br><span class=line>删除出生日期字段</span><br><span class=line>添加出生日期字段，数据类型为DATE类型</span><br><span class=line>修改序号字段名（number）为id，类型为BIGINT类型</span><br></pre></td></tr></table></figure><h5 id=（2）添加成绩表主外键><a class=header-anchor href=#（2）添加成绩表主外键>¶</a>（2）添加成绩表主外键</h5><p>result表需要添加的内容</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>主键约束：学号、课程编号和日期构成组合主键</span><br><span class=line>外键约束：主表student和从表result通过studentNo字段建立主外键关联</span><br></pre></td></tr></table></figure><h3 id=二、DML语句（增删改）><a class=header-anchor href=#二、DML语句（增删改）>¶</a>二、DML语句（增删改）</h3><h4 id=1、插入单条数据记录><a class=header-anchor href=#1、插入单条数据记录>¶</a>1、插入单条数据记录</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>INSERT INTO 表名 [(字段名列表)] VALUES (值列表);</span><br></pre></td></tr></table></figure><p>注意：</p><figure class="highlight tex"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>字段名是可选的，如省略则依次插入所有字段</span><br><span class=line>多个列表和多个值之间使用逗号分隔</span><br><span class=line>值列表和字段名列表一一对应</span><br><span class=line>如插入的是表中部分数据，字段名列表必填</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>INSERT INTO &#96;student&#96;(&#96;loginPwd&#96;,&#96;studentName&#96;,&#96;gradeId&#96;,&#96;phone&#96;,&#96;bornDate&#96;)</span><br><span class=line>VALUES(&#39;123&#39;,&#39;黄小平&#39;,1,&#39;13956799999&#39;,&#39;1996-5-8&#39;);</span><br></pre></td></tr></table></figure><h4 id=2、插入多条数据记录><a class=header-anchor href=#2、插入多条数据记录>¶</a>2、插入多条数据记录</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>INSERT INTO 新表（字段名列表）</span><br><span class=line>VALUES(值列表1),(值列表2),……,(值列表n);</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>INSERT INTO &#96;subject&#96;(&#96;subjectName&#96;,&#96;classHour&#96;,&#96;gradeID&#96;)</span><br><span class=line>VALUES(&#39;Logic Java&#39;,220,1),(&#39;HTML&#39;,160,1),(&#39;Java OOP&#39;,230,2);</span><br></pre></td></tr></table></figure><p>经验：</p><figure class="highlight tex"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>为避免表结构发生变化引发的错误，建议插入数据时写明具体字段名！</span><br></pre></td></tr></table></figure><h4 id=3、将查询结果插入新表><a class=header-anchor href=#3、将查询结果插入新表>¶</a>3、将查询结果插入新表</h4><h5 id=（1）事先创建新表且与插入数据字段相符><a class=header-anchor href=#（1）事先创建新表且与插入数据字段相符>¶</a>（1）事先创建新表且与插入数据字段相符</h5><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>INSERT INTO 新表（字段1,字段2……） </span><br><span class=line>SELECT字段1，字段2……</span><br><span class=line>FROM 原表;</span><br></pre></td></tr></table></figure><h5 id=（2）无需事先创建新表><a class=header-anchor href=#（2）无需事先创建新表>¶</a>（2）无需事先创建新表</h5><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>CREATE TABLE 新表（</span><br><span class=line>SELECT 字段1，字段2……</span><br><span class=line>FROM 原表）;</span><br></pre></td></tr></table></figure><p>（3）练习</p><p>编写SQL语句实现从学生表提取姓名、手机号两列数据存储到通讯录表中。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>CREATE TABLE &#96;phoneList&#96;(</span><br><span class=line>    SELECT &#96;studentName&#96;,&#96;phone&#96;</span><br><span class=line>    FROM &#96;student&#96;);</span><br></pre></td></tr></table></figure><p>注意：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>如新表已存在，将会报错！</span><br></pre></td></tr></table></figure><h4 id=4、更新数据记录><a class=header-anchor href=#4、更新数据记录>¶</a>4、更新数据记录</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>UPDATE 表名 </span><br><span class=line>SET 字段1&#x3D;值1,字段2&#x3D;值2,…,字段n&#x3D;值n </span><br><span class=line>[WHERE 条件];</span><br></pre></td></tr></table></figure><h4 id=5、删除数据记录><a class=header-anchor href=#5、删除数据记录>¶</a>5、删除数据记录</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>DELETE FROM 表名 [WHERE条件];</span><br><span class=line>TRUNCATE TABLE 表名;</span><br></pre></td></tr></table></figure><p>注意：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>TRUNCATE语句删除后将重置自增列，表结构及其字段、约束、索引保持不变，执行速度比DELETE语句快</span><br></pre></td></tr></table></figure><h4 id=6、小结><a class=header-anchor href=#6、小结>¶</a>6、小结</h4><figure class="highlight tex"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>MySQL中如何使用一条INSERT语句插入多条数据？</span><br><span class=line>MySQL中将查询结果集插入新表的两种方式是什么？两者的区别是什么？</span><br><span class=line>删除数据时使用DELETE和TRUNCATE的区别是什么？</span><br></pre></td></tr></table></figure><h3 id=三、DQL语句（查询）><a class=header-anchor href=#三、DQL语句（查询）>¶</a>三、DQL语句（查询）</h3><h4 id=1、通用查询><a class=header-anchor href=#1、通用查询>¶</a>1、通用查询</h4><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>SELECT  &lt;字段名列表&gt;</span><br><span class=line>FROM  &lt;表名或视图&gt;</span><br><span class=line>[WHERE  &lt;查询条件&gt;]</span><br><span class=line>[GROUP BY &lt;分组的字段名&gt;]</span><br><span class=line>[HAVING &lt;条件&gt;]</span><br><span class=line>[ORDER BY &lt;排序的字段名&gt; [ASC 或 DESC]]</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>SELECT &#96;studentNo&#96;,&#96;studentName&#96;,&#96;phone&#96;,&#96;address&#96;,&#96;bornDate&#96; </span><br><span class=line>FROM &#96;student&#96;</span><br><span class=line>WHERE &#96;gradeId&#96; &#x3D; 1</span><br><span class=line>ORDER BY studentNo;</span><br></pre></td></tr></table></figure><h4 id=2、LIMIT子句><a class=header-anchor href=#2、LIMIT子句>¶</a>2、LIMIT子句</h4><p>MySQL查询语句中使用LIMIT子句限制结果集。</p><p>语法：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>SELECT  &lt;字段名列表&gt;</span><br><span class=line>FROM  &lt;表名或视图&gt;</span><br><span class=line>[WHERE  &lt;查询条件&gt;]</span><br><span class=line>[GROUP BY &lt;分组的字段名&gt;]</span><br><span class=line>[ORDER BY  &lt;排序的列名&gt; [ASC 或 DESC]]</span><br><span class=line>[LIMIT [位置偏移量, ]行数];</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>SELECT &#96;studentNo&#96;,&#96;studentName&#96;,&#96;phone&#96;,&#96;address&#96;,&#96;bornDate&#96; </span><br><span class=line>FROM &#96;student&#96;</span><br><span class=line>WHERE &#96;gradeId&#96; &#x3D; 1</span><br><span class=line>ORDER BY studentNo</span><br><span class=line>LIMIT 4,4  </span><br><span class=line>#从第5条开始显示4条</span><br></pre></td></tr></table></figure><p>注意：</p><figure class="highlight tex"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>使用LIMIT子句时，注意第1条记录的位置是0！</span><br></pre></td></tr></table></figure><h4 id=3、常用函数><a class=header-anchor href=#3、常用函数>¶</a>3、常用函数</h4><h5 id=（1）聚合函数><a class=header-anchor href=#（1）聚合函数>¶</a>（1）聚合函数</h5><table><thead><tr><th>函数名</th><th>作用</th></tr></thead><tbody><tr><td>count()</td><td>返回某字段的行数</td></tr><tr><td>avg()</td><td>返回某字段的平均值</td></tr><tr><td>max()</td><td>返回某字段的最大值</td></tr><tr><td>min()</td><td>返回某字段的最小值</td></tr><tr><td>sum()</td><td>返回某字段的和</td></tr></tbody></table><h5 id=（2）字符串函数><a class=header-anchor href=#（2）字符串函数>¶</a>（2）字符串函数</h5><table><thead><tr><th>函数名</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>LENGTH(str)</td><td>计算字符串长度</td><td>SELECT LENGTH(‘date’);</td></tr><tr><td>CONCAT(str1,str2,…)</td><td>字符串合并</td><td>select CONCAT(‘a’,‘b’,‘c’)</td></tr><tr><td>INSERT(str,pos,len,newstr)</td><td>字符串替换</td><td>select INSERT(‘old string’,1,3,‘letter’)</td></tr><tr><td>LOWER(str)</td><td>将字符串转换为小写</td><td>select LOWER(‘A’)</td></tr><tr><td>UPPER(str)</td><td>将字符串转换为大写</td><td>select UPPER(‘a’)</td></tr><tr><td>LEFT(s,n)</td><td>返回字符串 s 开始的最左边 n 个字符</td><td>SELECT LEFT(‘hello’,2);</td></tr><tr><td>RIGHT(s,n)</td><td>返回字符串 s 开始的最右边 n 个字符</td><td>SELECT RIGHT(‘hello word!’,5);</td></tr><tr><td>LPAD(s1,len,s2)</td><td>返回字符串 s1 ，其左边由字符串 s2填充到 len 字符长度，如果 s1 的长度大于 len ，则返回值被缩短至 len 长度</td><td>SELECT RPAD(‘hello’,4,’?’);</td></tr><tr><td>RPAD(s1,len,s2)</td><td>返回字符串 s1 ，其右边由字符串 s2 填充到 len 字符长度，如果 s1 的长度大于 len ，则返回值被缩短至 len 长度</td><td>SELECT RPAD(‘hello’,10,’?’);</td></tr><tr><td>LTRIM(s)</td><td>用于删除字符串 s 左侧的空格</td><td>SELECT LTRIM(’ book ');</td></tr><tr><td>RTRIM(s)</td><td>用于删除字符串 s 右侧的空格</td><td>SELECT RTRIM(’ book ');</td></tr><tr><td>TRIM(s)</td><td>用于删除字符串 s 两侧的空格</td><td>SELECT TRIM(’ book ');</td></tr><tr><td>TRIM(s1 FROM s)</td><td>删除指定字符串的函数</td><td>SELECT TRIM(‘xy’ FROM ‘xyxyabcxy’);</td></tr><tr><td>REPEAT(s,n)</td><td>用于重复字符串 s ，n 表示重复多少次</td><td>SELECT REPEAT(‘mysql’,3);</td></tr><tr><td>SPACE(n)</td><td>用于返回 n 个空格</td><td>SELECT SPACE(20);</td></tr><tr><td>REPLACE(s,s1,s2)</td><td>使用字符串 s2 替换字符串 s 中所有的字符串 s1</td><td>SELECT REPLACE(‘<a href=http://xxx.mysql.com target=_blank rel=noopener>xxx.mysql.com</a>’, ‘x’, ‘w’);</td></tr><tr><td>STRCMP(s1,s2)</td><td>用于比较字符串 s1 和 s2 的大小，若所有字符串相同则返回 0 ，若第一个字符串大于第二个字符串则返回 1 ，若第一个字符串小于第二个字符串则返回 -1</td><td>SELECT STRCMP(‘txt’, ‘txt2’), STRCMP(‘txt’, ‘txt’);</td></tr><tr><td>SUBSTRING(str,num,len)</td><td>获取指定位置的子字符串</td><td>select SUBSTRING(‘JavaMysqlOracle’,5,5);</td></tr><tr><td>MID(s,n,len)</td><td>用于获取指定位置的子字符串</td><td>SELECT MID(‘breakfast’,5);</td></tr><tr><td>LOCATE(str1,str)</td><td>返回字符串 str1 在字符串 str 中的开始位置</td><td>SELECT LOCATE(‘ball’, ‘football’);</td></tr><tr><td>POSITION(str1 IN str)</td><td>返回字符串 str1 在字符串 str 中的开始位置</td><td>SELECT POSITION(‘ball’ IN ‘football’);</td></tr><tr><td>INSTR(str, str1)</td><td>返回子字符串 str1 在字符串 str 中的开始位置</td><td>SELECT INSTR(‘football’, ‘ball’);</td></tr><tr><td>REVERSE(s)</td><td>将字符串 s 反转</td><td>SELECT REVERSE(‘abcd’);</td></tr><tr><td>ELT(n, s1, s2, s3, …)</td><td>返回第 n 个字符串，如果 n超出范围则返回 NULL</td><td>SELECT ELT(3, ‘a’, ‘b’, ‘c’, ‘d’);</td></tr><tr><td>FIELD(s, s1, s2, …)</td><td>返回字符串 s 在列表 s1, s2, … 中的位置，如果不存在字符串 s 则返回 0 ，如果字符串 s 是 NULL 也返回 0</td><td>SELECT FIELD(‘hi’, ‘hihi’, ‘hey’, ‘hi’, ‘bas’);</td></tr><tr><td>FIND_IN_SET(s1, s2)</td><td>返回字符串 s1 在字符串列表 s2中的位置</td><td>SELECT FIND_IN_SET(‘hi’, ‘hihi,hey,hi,bas’);</td></tr></tbody></table><h5 id=（3）时间日期函数><a class=header-anchor href=#（3）时间日期函数>¶</a>（3）时间日期函数</h5><table><thead><tr><th>函数名</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>CURDATE()</td><td>获取当前日期</td><td>select CURDATE();</td></tr><tr><td>CURTIME()</td><td>获取当前时间</td><td>select CURTIME();</td></tr><tr><td>CURRENT_TIMESTAMP() 、<br>.LOCALTIME() 、NOW() 、SYSDATE()<br>CURRENT_TIMESTAMP()</td><td>获取当前日期和时间</td><td>select NOW();</td></tr><tr><td>UNIX_TIMESTAMP()</td><td>获取 UNIX 格式的时间戳</td><td>SELECT UNIX_TIMESTAMP();</td></tr><tr><td>FROM_UNIXTIME()</td><td>将 UNIX 格式的时间戳转换为普通格式的时间</td><td>SELECT FROM_UNIXTIME(‘1495542689’);</td></tr><tr><td>UTC_DATE() UTC_DATE()</td><td>获取当前 UTC (世界标准时间) 日期值</td><td>SELECT UTC_DATE();</td></tr><tr><td>UTC_TIME() UTC_TIME()</td><td>获取当前 UTC (世界标准时间) 时间值</td><td>SELECT UTC_TIME();</td></tr><tr><td>YEAR(date)</td><td>返回日期date的年份</td><td>select YEAR(NOW());</td></tr><tr><td>QUARTER(date)</td><td>返回日期date为一年中第几季度</td><td>select QUARTER(NOW());</td></tr><tr><td>MONTH(date)</td><td>返回日期date的月份</td><td>select MONTH(NOW());</td></tr><tr><td>WEEK(date)</td><td>返回日期date为一年中第几周</td><td>select WEEK(NOW());</td></tr><tr><td>DAY(date)</td><td>返回日期date的日期</td><td>select DAY(NOW());</td></tr><tr><td>DAYOFYEAR(date)</td><td>返回 date 是一年中的第几天，一年有 365 天</td><td>SELECT DAYOFYEAR(‘2017-05-23’);</td></tr><tr><td>DAYOFMONTH(date)</td><td>计算 date 是一个月中的第几天</td><td>SELECT DAYOFMONTH(‘2017-05-23’);</td></tr><tr><td>HOUR(time)</td><td>返回日期date的小时</td><td>select HOUR(NOW());</td></tr><tr><td>MINUTE(time)</td><td>返回日期date的分钟</td><td>select MINUTE(NOW());</td></tr><tr><td>SECOND(time)</td><td>返回日期date的秒</td><td>select SECOND(NOW());</td></tr><tr><td>TIME_TO_SEC(time)</td><td>将 time 转换为秒钟，公式为 &quot; 小时3600 + 分钟60 + 秒 &quot;</td><td>SELECT TIME_TO_SEC(‘23:23:00’);</td></tr><tr><td>SEC_TO_TIME(time)</td><td>将秒值转换为时间格式</td><td>SELECT SEC_TO_TIME(‘84180’);</td></tr><tr><td>DATEDIFF(date1,date2)</td><td>返回日期date的date1和date2间隔的天数</td><td>select DATEDIFF(NOW(),‘2020-06-07’);</td></tr><tr><td>ADDDATE(date,n)</td><td>计算日期date加上n天以后在日期</td><td>select ADDDATE(NOW(),3);</td></tr><tr><td>DATE_FORMAT(date, format)</td><td>格式化日期，即根据 format 指定的格式显示 date 值</td><td>SELECT DATE_FORMAT(‘1997-10-04 22:23:00’, ‘%W %M %Y’);</td></tr><tr><td>TIME_FORMAT(time, format)</td><td>格式化时间，即根据 format 指定的格式显示 time 值</td><td>SELECT TIME_FORMAT(‘16:00:00’, ‘%H %k %I’);</td></tr><tr><td>GET_FORMAT()</td><td>指定值类型和格式化类型，然后会显示成格式字符串</td><td>SELECT DATE_FORMAT(‘2000-10-05 22:23:00’, GET_FORMAT(DATE,‘USA’));</td></tr></tbody></table><p>参考内容：</p><figure class="highlight tex"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br></pre></td><td class=code><pre><span class=line><span class=comment>%d该月日期，数字形式（00..31） </span></span><br><span class=line><span class=comment>%e该月日期，数字形式（0..31） </span></span><br><span class=line><span class=comment>%f微秒（000000...999999） </span></span><br><span class=line><span class=comment>%H以2位数表示24小时（00..23） </span></span><br><span class=line><span class=comment>%h,%I 以2位数表示12小时（01..12） </span></span><br><span class=line><span class=comment>%i分钟，数字形式（00-59） </span></span><br><span class=line><span class=comment>%j一年中的天数（001-366） </span></span><br><span class=line><span class=comment>%k以24小时（0-23） </span></span><br><span class=line><span class=comment>%l以12小时（0..12） </span></span><br><span class=line><span class=comment>%M月份名称（january..December） </span></span><br><span class=line><span class=comment>%m月份数字形式（00..12） </span></span><br><span class=line><span class=comment>%p上午（AM）或下午（PM） </span></span><br><span class=line><span class=comment>%r时间，12小时制（小时hh：分钟mm：秒钟ss后面加AM或PM）</span></span><br><span class=line><span class=comment>%S,%s以2位数形式表示秒（00..59） </span></span><br><span class=line><span class=comment>%T时间，24小时制（小时hh：分钟mm：秒数ss） </span></span><br><span class=line><span class=comment>%U周（00..53），其中周日为每周的第一天 </span></span><br><span class=line><span class=comment>%u周（00..53），其中周一为每周的第一天 </span></span><br><span class=line><span class=comment>%V周（01..53），其中周日为每周的第一天，和%X一起使用 </span></span><br><span class=line><span class=comment>%v周（01..53），其中周一为每周的第一天，和%x一起使用 </span></span><br><span class=line><span class=comment>%W工作日名称（周日..周六）</span></span><br><span class=line><span class=comment>%w一周中的每日（0=周日..6=周六） </span></span><br><span class=line><span class=comment>%X该周的年份，其中周日为每周的第一天；数字形式4位数，和%V同时使用 </span></span><br><span class=line><span class=comment>%x该周的年份，其中周一为每周的第一天；数字形式4位数，和%v同时使用 </span></span><br><span class=line><span class=comment>%Y4位数形式表示年份 </span></span><br><span class=line><span class=comment>%y2位数形式表示年份 </span></span><br><span class=line><span class=comment>%% “%”文字字符</span></span><br></pre></td></tr></table></figure><h5 id=（4）数学函数><a class=header-anchor href=#（4）数学函数>¶</a>（4）数学函数</h5><table><thead><tr><th>函数名</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>ABS(x)</td><td>绝对值函数</td><td>SELECT ABS(-2);</td></tr><tr><td>PI()</td><td>返回圆周率的函数</td><td>SELECT PI();</td></tr><tr><td>SQRT(x)</td><td>平方根函数，返回非负数二次方根</td><td>SELECT SQRT(9);</td></tr><tr><td>CEIL(x)</td><td>向上取整</td><td>SELECT CEIL(2.1);</td></tr><tr><td>FLOOR(x)</td><td>向下取整</td><td>SELECT FLOOR(2.5);</td></tr><tr><td>RAND(x)</td><td>返回一个随机浮点值，范围在 0 ~ 1 之间</td><td>SELECT RAND();</td></tr><tr><td>ROUND(x)</td><td>对x进行四舍五入</td><td>SELECT ROUND(-1.34);</td></tr><tr><td>ROUND(x,y)</td><td>对x进行四舍五入，并且保留小数点后y位</td><td>SELECT ROUND(1.37,1);</td></tr><tr><td>TRUNCATE(x,y)</td><td>对x进行截取，结果保留小数点后y位</td><td>SELECT TRUNCATE(1.31,1);</td></tr><tr><td>POW(x,y)</td><td>返回 x 的 y 次方的结果</td><td>SELECT POW(2,4);</td></tr></tbody></table><h5 id=（5）系统信息函数><a class=header-anchor href=#（5）系统信息函数>¶</a>（5）系统信息函数</h5><table><thead><tr><th>函数名</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>VERSION()</td><td>获取 MySQL 版本号</td><td>SELECT VERSION();</td></tr><tr><td>CHARSET(str)</td><td>查看字符串 str 的字符集</td><td>SELECT CHARSET(‘abc’);</td></tr><tr><td>COLLATION(str)</td><td>查看字符串 str 的字符排列方式</td><td>SELECT COLLATION(‘abc’);</td></tr><tr><td>LAST_INSERT_ID()</td><td>获取最后一个自动生成的ID 值</td><td>SELECT LAST_INSERT_ID();</td></tr><tr><td>USER() 、<br>CURRENT_USER() 、<br>SYSTEM_USER()</td><td>返回当前登录的用户及主机名</td><td>SELECT USER();<br>SELECT CURRENT_USER();<br>SELECT SYSTEM_USER();</td></tr><tr><td>CONNECTION_ID()</td><td>查看当前用户的连接数的ID</td><td>SELECT CONNECTION_ID();</td></tr><tr><td>DATABASE()、SCHEMA()</td><td>查看当前使用的数据库</td><td>SELECT DATABASE();<br>SELECT SCHEMA();</td></tr><tr><td>SHOW PROCESSLIST</td><td>查看当前用户的连接信息</td><td>SHOW PROCESSLIST;</td></tr></tbody></table><blockquote><p>CONNECTION_ID()函数的参数</p></blockquote><figure class="highlight tex"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>1. Id ：用户登录 MySQL 时，系统分配的连接 id</span><br><span class=line>2. User ：当前连接的用户</span><br><span class=line>3. Host ：显示这个语句是从哪个 IP 的哪个端口上发出的，可以用来追踪出现问题语句的用户</span><br><span class=line>4. db ：显示这个进程目前连接的是哪个数据库</span><br><span class=line>5. Command ：显示当前连接执行的命令，一般取值为休眠(Sleep)、查询(Query)、连接(Connect)</span><br><span class=line>6. Time ：显示这个状态持续的时间，单位是秒</span><br><span class=line>7. State ：显示使用当前连接的 SQL 语句的状态</span><br><span class=line>8. Info ：显示这个 SQL 语句</span><br></pre></td></tr></table></figure><h5 id=（6）条件判断函数><a class=header-anchor href=#（6）条件判断函数>¶</a>（6）条件判断函数</h5><table><thead><tr><th>函数</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>IF() IF(expr, v1, v2)</td><td>如果表达式 expr 为 TRUE ，则返回值为 v1 ，否则返回 v2</td><td>SELECT IF(1&gt;2, 2, 3);</td></tr><tr><td>IFNULL() IFNULL(v1, v2)</td><td>如果 v1 不为 NULL ，则返回值为 v1 ；如果 v1 为 NULL ，则返回值为 v2</td><td>SELECT IFNULL(1,2), IFNULL(NULL,10);</td></tr><tr><td>CASE expr WHEN v1 THEN r1 [WHEN v2 THEN r2] [ELSE rn] END</td><td>如果 expr 等于某个 vn，则返回对应位置 THEN 后面的结果，如果与所有值都不相等，则返回 ELSE 后面的 rn</td><td>SELECT CASE 2 WHEN 1 THEN ‘one’ WHEN 2 THEN ‘two’ ELSE ‘more’ END;</td></tr></tbody></table><h5 id=（7）加密-解密函数><a class=header-anchor href=#（7）加密-解密函数>¶</a>（7）加密/解密函数</h5><table><thead><tr><th>函数</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>PASSWORD(str)</td><td>从明文密码 str 计算并返回加密后的密码字符串，当参数为 NULL 时，返回 NULL</td><td>SELECT PASSWORD(‘newpwd’);</td></tr><tr><td>MD5(str)</td><td>为字符串 str 算出一个 MD5 128 比特校验值</td><td>SELECT MD5(‘newpwd’);</td></tr><tr><td>ENCODE(str, pswd_str)</td><td>使用 pswd_str 作为密码，加密 str</td><td>SELECT ENCODE(‘secret’, ‘newpwd’);</td></tr><tr><td>DECODE(crypt_str, pswd_str)</td><td>使用 pswd_str 作为密码，解密加密字符串 crypt_str</td><td>SELECT DECODE(ENCODE(‘secret’,‘cry’), ‘cry’);</td></tr></tbody></table><h5 id=（8）其它函数><a class=header-anchor href=#（8）其它函数>¶</a>（8）其它函数</h5><table><thead><tr><th>函数</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>FORMAT(x, n)</td><td>将数字 x 格式化，并以四舍五入的方式保留小数点后 n 位，结果以字符串的形式返回</td><td>SELECT FORMAT(1.23456, 4);</td></tr><tr><td>CONV()</td><td>不同进制数之间的转换</td><td>SELECT CONV(‘a’,16,2), # 将16进制的a转换为2进制<br>SELECT CONV(15,10,2), # 将10进制的15转换为2进制<br>SELECT CONV(15,10,8), # 将10进制的15转换为8进制<br>SELECT CONV(15,10,16); # 将10进制的15转换为16进制</td></tr><tr><td>INET_ATON(expr)</td><td>将网络地址转换为一个代表该地址数值的整数</td><td>SELECT INET_ATON(‘192.168.1.1’);</td></tr><tr><td>GET_LOCK(str, timeout)</td><td>使用字符串 str 来得到一个锁，持续时间 timeout 秒<br>1. 若成功得到锁，则返回 1<br>2. 若操作超时，则返回 0<br>3. 若发生错误，则返回 NULL</td><td>SELECT GET_LOCK(‘lock1’, 10);</td></tr><tr><td>RELEASE_LOCAK(str)</td><td>用于解开被 GET_LOCK() 获取的，用字符串 str 所命名的锁<br>1. 若锁被解开，则返回 1<br>2. 若该线程尚未创建锁，则返回 0<br>3. 若命名的锁不存在，则返回 NULL<br>4. 若该锁从未被 GET_LOCK() 的调用获取，或锁已经被提前解开，则该锁不存在</td><td>SELECT RELEASE_LOCK(‘lock1’);</td></tr><tr><td>IS_FREE_LOCK(str)</td><td>检查名为 str 的锁是否可以使用<br>1. 若锁可以使用，则返回 1<br>2. 若锁正在被使用，则返回 0<br>3. 若出现错误，则返回 NULL</td><td>SELECT IS_FREE_LOCK(‘lock1’);</td></tr><tr><td>IS_USED_LOCK(str)</td><td>检查名为 str 的锁是否正在被使用，若被封锁，则返回使用该锁的客户端的连接标识<br>符，否则返回 NULL</td><td>SELECT IS_USED_LOCK(‘lock1’);</td></tr><tr><td>BENCHMARK(count, expr)</td><td>用于重复 count 次执行表达式 expr<br>1. 可以用于计算 MySQL 处理表达式的速度<br>2. 可以在 MySQL 客户端内部报告语句执行的时间</td><td>SELECT PASSWORD(‘newpwd’);<br>SELECT BENCHMARK( 500000, PASSWORD(‘newpwd’) );</td></tr><tr><td>CONVERT(… USING …)</td><td>用于改变字符串的默认字符集<br>默认是utf8字符集</td><td>SELECT CHARSET(‘abc’);<br>SELECT CHARSET(CONVERT(‘abc’ USING latin1));</td></tr><tr><td>CONVERT(x, type)</td><td>将一个数据类型的值转换为另一个数据类型的值</td><td>SELECT CONVERT(100, CHAR(2));</td></tr></tbody></table><h4 id=4、运算符><a class=header-anchor href=#4、运算符>¶</a>4、运算符</h4><h5 id=（1）算术运算符><a class=header-anchor href=#（1）算术运算符>¶</a>（1）算术运算符</h5><table><thead><tr><th>运算符</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>+</td><td>加法</td><td>select 1+2;</td></tr><tr><td>-</td><td>减法</td><td>select 1-2;</td></tr><tr><td>*</td><td>乘法</td><td>select 2*5;</td></tr><tr><td>/或DIV</td><td>除法</td><td>select 9/3; 或 select 9 DIV 3;</td></tr><tr><td>%或MOD</td><td>取余</td><td>select 9%2; 或 select 9 MOD 2;</td></tr></tbody></table><h5 id=（2）比较运算符><a class=header-anchor href=#（2）比较运算符>¶</a>（2）比较运算符</h5><p>SELECT 语句中的条件语句经常要使用比较运算符。</p><p>通过这些比较运算符，可以判断表中的哪些记录是符合条件的。比较结果为真，则返回 1，为假则返回 0，比较结果不确定则返回 NULL。</p><table><thead><tr><th style=text-align:left>符号</th><th style=text-align:left>描述</th><th style=text-align:left>备注</th></tr></thead><tbody><tr><td style=text-align:left>=</td><td style=text-align:left>等于</td><td style=text-align:left></td></tr><tr><td style=text-align:left>&lt;&gt;, !=</td><td style=text-align:left>不等于</td><td style=text-align:left></td></tr><tr><td style=text-align:left>&gt;</td><td style=text-align:left>大于</td><td style=text-align:left></td></tr><tr><td style=text-align:left>&lt;</td><td style=text-align:left>小于</td><td style=text-align:left></td></tr><tr><td style=text-align:left>&lt;=</td><td style=text-align:left>小于等于</td><td style=text-align:left></td></tr><tr><td style=text-align:left>&gt;=</td><td style=text-align:left>大于等于</td><td style=text-align:left></td></tr><tr><td style=text-align:left>BETWEEN</td><td style=text-align:left>在两值之间</td><td style=text-align:left>&gt;=min&amp;&amp;&lt;=max</td></tr><tr><td style=text-align:left>NOT BETWEEN</td><td style=text-align:left>不在两值之间</td><td style=text-align:left></td></tr><tr><td style=text-align:left>IN</td><td style=text-align:left>在集合中</td><td style=text-align:left></td></tr><tr><td style=text-align:left>NOT IN</td><td style=text-align:left>不在集合中</td><td style=text-align:left></td></tr><tr><td style=text-align:left>&lt;=&gt;</td><td style=text-align:left>严格比较两个NULL值是否相等</td><td style=text-align:left>两个操作码均为NULL时，其所得值为1；而当一个操作码为NULL时，其所得值为0</td></tr><tr><td style=text-align:left>LIKE</td><td style=text-align:left>模糊匹配</td><td style=text-align:left></td></tr><tr><td style=text-align:left>REGEXP 或 RLIKE</td><td style=text-align:left>正则式匹配</td><td style=text-align:left></td></tr><tr><td style=text-align:left>IS NULL</td><td style=text-align:left>为空</td><td style=text-align:left></td></tr><tr><td style=text-align:left>IS NOT NULL</td><td style=text-align:left>不为空</td><td style=text-align:left></td></tr></tbody></table><h6 id=1）等于><a class=header-anchor href=#1）等于>¶</a>1）等于</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2&#x3D;3;</span><br><span class=line>+-----+</span><br><span class=line>| 2&#x3D;3 |</span><br><span class=line>+-----+</span><br><span class=line>|   0 |</span><br><span class=line>+-----+</span><br><span class=line></span><br><span class=line></span><br><span class=line>mysql&gt; select NULL &#x3D; NULL;</span><br><span class=line>+-------------+</span><br><span class=line>| NULL &#x3D; NULL |</span><br><span class=line>+-------------+</span><br><span class=line>|        NULL |</span><br><span class=line>+-------------+</span><br></pre></td></tr></table></figure><h6 id=2）不等于><a class=header-anchor href=#2）不等于>¶</a>2）不等于</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2&lt;&gt;3;</span><br><span class=line>+------+</span><br><span class=line>| 2&lt;&gt;3 |</span><br><span class=line>+------+</span><br><span class=line>|    1 |</span><br><span class=line>+------+</span><br></pre></td></tr></table></figure><h6 id=3）安全等于><a class=header-anchor href=#3）安全等于>¶</a>3）安全等于</h6><p>与 <strong>=</strong> 的区别在于当两个操作码均为 NULL 时，其所得值为 1 而不为 NULL，而当一个操作码为 NULL 时，其所得值为 0而不为 NULL。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2&lt;&#x3D;&gt;3;</span><br><span class=line>+-------+</span><br><span class=line>| 2&lt;&#x3D;&gt;3 |</span><br><span class=line>+-------+</span><br><span class=line>|     0 |</span><br><span class=line>+-------+</span><br><span class=line></span><br><span class=line></span><br><span class=line>mysql&gt; select null&#x3D;null;</span><br><span class=line>+-----------+</span><br><span class=line>| null&#x3D;null |</span><br><span class=line>+-----------+</span><br><span class=line>|      NULL |</span><br><span class=line>+-----------+</span><br><span class=line></span><br><span class=line>        </span><br><span class=line>mysql&gt; select null&lt;&#x3D;&gt;null;</span><br><span class=line>+-------------+</span><br><span class=line>| null&lt;&#x3D;&gt;null |</span><br><span class=line>+-------------+</span><br><span class=line>|           1 |</span><br><span class=line>+-------------+</span><br></pre></td></tr></table></figure><h6 id=4）小于><a class=header-anchor href=#4）小于>¶</a>4）小于</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2&lt;3;</span><br><span class=line>+-----+</span><br><span class=line>| 2&lt;3 |</span><br><span class=line>+-----+</span><br><span class=line>|   1 |</span><br><span class=line>+-----+</span><br></pre></td></tr></table></figure><h6 id=5）小于等于><a class=header-anchor href=#5）小于等于>¶</a>5）小于等于</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2&lt;&#x3D;3;</span><br><span class=line>+------+</span><br><span class=line>| 2&lt;&#x3D;3 |</span><br><span class=line>+------+</span><br><span class=line>|    1 |</span><br><span class=line>+------+</span><br></pre></td></tr></table></figure><h6 id=6）大于><a class=header-anchor href=#6）大于>¶</a>6）大于</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2&gt;3;</span><br><span class=line>+-----+</span><br><span class=line>| 2&gt;3 |</span><br><span class=line>+-----+</span><br><span class=line>|   0 |</span><br><span class=line>+-----+</span><br></pre></td></tr></table></figure><h6 id=7）大于等于><a class=header-anchor href=#7）大于等于>¶</a>7）大于等于</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2&gt;&#x3D;3;</span><br><span class=line>+------+</span><br><span class=line>| 2&gt;&#x3D;3 |</span><br><span class=line>+------+</span><br><span class=line>|    0 |</span><br><span class=line>+------+</span><br></pre></td></tr></table></figure><h6 id=8）BETWEEN><a class=header-anchor href=#8）BETWEEN>¶</a>8）BETWEEN</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 5 between 1 and 10;</span><br><span class=line>+--------------------+</span><br><span class=line>| 5 between 1 and 10 |</span><br><span class=line>+--------------------+</span><br><span class=line>|                  1 |</span><br><span class=line>+--------------------+</span><br></pre></td></tr></table></figure><h6 id=9）IN><a class=header-anchor href=#9）IN>¶</a>9）IN</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 5 in (1,2,3,4,5);</span><br><span class=line>+------------------+</span><br><span class=line>| 5 in (1,2,3,4,5) |</span><br><span class=line>+------------------+</span><br><span class=line>|                1 |</span><br><span class=line>+------------------+</span><br></pre></td></tr></table></figure><h6 id=10）NOT-IN><a class=header-anchor href=#10）NOT-IN>¶</a>10）NOT IN</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 5 not in (1,2,3,4,5);</span><br><span class=line>+----------------------+</span><br><span class=line>| 5 not in (1,2,3,4,5) |</span><br><span class=line>+----------------------+</span><br><span class=line>|                    0 |</span><br><span class=line>+----------------------+</span><br></pre></td></tr></table></figure><h6 id=11）IS-NULL><a class=header-anchor href=#11）IS-NULL>¶</a>11）IS NULL</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select null is NULL;</span><br><span class=line>+--------------+</span><br><span class=line>| null is NULL |</span><br><span class=line>+--------------+</span><br><span class=line>|            1 |</span><br><span class=line>+--------------+</span><br><span class=line></span><br><span class=line>mysql&gt; select &#39;a&#39; is NULL;</span><br><span class=line>+-------------+</span><br><span class=line>| &#39;a&#39; is NULL |</span><br><span class=line>+-------------+</span><br><span class=line>|           0 |</span><br><span class=line>+-------------+</span><br></pre></td></tr></table></figure><h6 id=12）IS-NOT-NULL><a class=header-anchor href=#12）IS-NOT-NULL>¶</a>12）IS NOT NULL</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select null IS NOT NULL;</span><br><span class=line>+------------------+</span><br><span class=line>| null IS NOT NULL |</span><br><span class=line>+------------------+</span><br><span class=line>|                0 |</span><br><span class=line>+------------------+</span><br><span class=line></span><br><span class=line>        </span><br><span class=line>mysql&gt; select &#39;a&#39; IS NOT NULL;</span><br><span class=line>+-----------------+</span><br><span class=line>| &#39;a&#39; IS NOT NULL |</span><br><span class=line>+-----------------+</span><br><span class=line>|               1 |</span><br><span class=line>+-----------------+</span><br></pre></td></tr></table></figure><h6 id=13、LIKE><a class=header-anchor href=#13、LIKE>¶</a>13、LIKE</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select &#39;12345&#39; like &#39;12%&#39;;</span><br><span class=line>+--------------------+</span><br><span class=line>| &#39;12345&#39; like &#39;12%&#39; |</span><br><span class=line>+--------------------+</span><br><span class=line>|                  1 |</span><br><span class=line>+--------------------+</span><br><span class=line></span><br><span class=line>mysql&gt; select &#39;12345&#39; like &#39;12_&#39;;</span><br><span class=line>+--------------------+</span><br><span class=line>| &#39;12345&#39; like &#39;12_&#39; |</span><br><span class=line>+--------------------+</span><br><span class=line>|                  0 |</span><br><span class=line>+--------------------+</span><br></pre></td></tr></table></figure><h6 id=14、REGEXP><a class=header-anchor href=#14、REGEXP>¶</a>14、REGEXP</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select &#39;beijing&#39; REGEXP &#39;jing&#39;;</span><br><span class=line>+-------------------------+</span><br><span class=line>| &#39;beijing&#39; REGEXP &#39;jing&#39; |</span><br><span class=line>+-------------------------+</span><br><span class=line>|                       1 |</span><br><span class=line>+-------------------------+</span><br><span class=line></span><br><span class=line>mysql&gt; select &#39;beijing&#39; REGEXP &#39;xi&#39;;</span><br><span class=line>+-----------------------+</span><br><span class=line>| &#39;beijing&#39; REGEXP &#39;xi&#39; |</span><br><span class=line>+-----------------------+</span><br><span class=line>|                     0 |</span><br><span class=line>+-----------------------+</span><br></pre></td></tr></table></figure><h5 id=（3）逻辑运算符><a class=header-anchor href=#（3）逻辑运算符>¶</a>（3）逻辑运算符</h5><p>逻辑运算符用来判断表达式的真假。如果表达式是真，结果返回 1。如果表达式是假，结果返回 0。</p><table><thead><tr><th style=text-align:left>运算符号</th><th style=text-align:left>作用</th></tr></thead><tbody><tr><td style=text-align:left>NOT 或 !</td><td style=text-align:left>逻辑非</td></tr><tr><td style=text-align:left>AND</td><td style=text-align:left>逻辑与</td></tr><tr><td style=text-align:left>OR</td><td style=text-align:left>逻辑或</td></tr><tr><td style=text-align:left>XOR</td><td style=text-align:left>逻辑异或</td></tr></tbody></table><h6 id=1）与><a class=header-anchor href=#1）与>¶</a>1）与</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2 and 0;</span><br><span class=line>+---------+</span><br><span class=line>| 2 and 0 |</span><br><span class=line>+---------+</span><br><span class=line>|       0 |</span><br><span class=line>+---------+</span><br><span class=line></span><br><span class=line>        </span><br><span class=line>mysql&gt; select 2 and 1;   </span><br><span class=line>+---------+     </span><br><span class=line>| 2 and 1 |      </span><br><span class=line>+---------+      </span><br><span class=line>|       1 |      </span><br><span class=line>+---------+</span><br></pre></td></tr></table></figure><h6 id=2）或><a class=header-anchor href=#2）或>¶</a>2）或</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 2 or 0;</span><br><span class=line>+--------+</span><br><span class=line>| 2 or 0 |</span><br><span class=line>+--------+</span><br><span class=line>|      1 |</span><br><span class=line>+--------+</span><br><span class=line></span><br><span class=line>mysql&gt; select 2 or 1;</span><br><span class=line>+--------+</span><br><span class=line>| 2 or 1 |</span><br><span class=line>+--------+</span><br><span class=line>|      1 |</span><br><span class=line>+--------+</span><br><span class=line></span><br><span class=line>mysql&gt; select 0 or 0;</span><br><span class=line>+--------+</span><br><span class=line>| 0 or 0 |</span><br><span class=line>+--------+</span><br><span class=line>|      0 |</span><br><span class=line>+--------+</span><br><span class=line></span><br><span class=line>mysql&gt; select 1 || 0;</span><br><span class=line>+--------+</span><br><span class=line>| 1 || 0 |</span><br><span class=line>+--------+</span><br><span class=line>|      1 |</span><br><span class=line>+--------+</span><br></pre></td></tr></table></figure><h6 id=3）非><a class=header-anchor href=#3）非>¶</a>3）非</h6><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select not 1;</span><br><span class=line>+-------+</span><br><span class=line>| not 1 |</span><br><span class=line>+-------+</span><br><span class=line>|     0 |</span><br><span class=line>+-------+</span><br><span class=line></span><br><span class=line>mysql&gt; select !0;</span><br><span class=line>+----+</span><br><span class=line>| !0 |</span><br><span class=line>+----+</span><br><span class=line>|  1 |</span><br><span class=line>+----+</span><br></pre></td></tr></table></figure><h6 id=4）异或><a class=header-anchor href=#4）异或>¶</a>4）异或</h6><p>当任意一个操作数为NULL时,返回值为NULL，对于非NULL的操作数,如果两个的逻辑真假值相异，则返回结果为1，否则为0。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 1 xor 1;</span><br><span class=line>+---------+</span><br><span class=line>| 1 xor 1 |</span><br><span class=line>+---------+</span><br><span class=line>|       0 |</span><br><span class=line>+---------+</span><br><span class=line></span><br><span class=line>mysql&gt; select 0 xor 0;</span><br><span class=line>+---------+</span><br><span class=line>| 0 xor 0 |</span><br><span class=line>+---------+</span><br><span class=line>|       0 |</span><br><span class=line>+---------+</span><br><span class=line></span><br><span class=line>mysql&gt; select 1 xor 0;</span><br><span class=line>+---------+</span><br><span class=line>| 1 xor 0 |</span><br><span class=line>+---------+</span><br><span class=line>|       1 |</span><br><span class=line>+---------+</span><br><span class=line></span><br><span class=line>mysql&gt; select null or 1;</span><br><span class=line>+-----------+</span><br><span class=line>| null or 1 |</span><br><span class=line>+-----------+</span><br><span class=line>|         1 |</span><br><span class=line>+-----------+</span><br><span class=line></span><br><span class=line>mysql&gt; select 1 ^ 0;</span><br><span class=line>+-------+</span><br><span class=line>| 1 ^ 0 |</span><br><span class=line>+-------+</span><br><span class=line>|     1 |</span><br><span class=line>+-------+</span><br></pre></td></tr></table></figure><h5 id=（4）位运算符><a class=header-anchor href=#（4）位运算符>¶</a>（4）位运算符</h5><p>位运算符是在二进制数上进行计算的运算符。位运算会先将操作数变成二进制数，进行位运算。然后再将计算结果从二进制数变回十进制数。</p><table><thead><tr><th style=text-align:left>运算符号</th><th style=text-align:left>作用</th></tr></thead><tbody><tr><td style=text-align:left>&amp;</td><td style=text-align:left>按位与</td></tr><tr><td style=text-align:left>|</td><td style=text-align:left>按位或</td></tr><tr><td style=text-align:left>^</td><td style=text-align:left>按位异或</td></tr><tr><td style=text-align:left>!</td><td style=text-align:left>取反</td></tr><tr><td style=text-align:left>&lt;&lt;</td><td style=text-align:left>左移</td></tr><tr><td style=text-align:left>&gt;&gt;</td><td style=text-align:left>右移</td></tr></tbody></table><h6 id=1）按位与><a class=header-anchor href=#1）按位与>¶</a>1）按位与</h6><p>对应的二进制位都为 1 ，则该位的运算结果为 1 ，否则为 0。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 3&amp;5;</span><br><span class=line>+-----+</span><br><span class=line>| 3&amp;5 |</span><br><span class=line>+-----+</span><br><span class=line>|   1 |</span><br><span class=line>+-----+</span><br></pre></td></tr></table></figure><h6 id=2）按位或><a class=header-anchor href=#2）按位或>¶</a>2）按位或</h6><p>对应的二进制位有一个或两个为 1 ，则该位的运算结果为 1 ，否则为 0。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; SELECT 10 | 15 , 9 | 4 | 2 ;</span><br><span class=line>+---------+-----------+</span><br><span class=line>| 10 | 15 | 9 | 4 | 2 | # 10的二进制为1010,15的二进制为1111，按位或运算之后结果为</span><br><span class=line>1111，即15</span><br><span class=line>+---------+-----------+ # 9的二进制为1001,4为0100,2的二进制为0010，按位或运算之后</span><br><span class=line>1111</span><br><span class=line>| 15 | 15 |</span><br><span class=line>+---------+-----------+</span><br></pre></td></tr></table></figure><h6 id=3）按位异或><a class=header-anchor href=#3）按位异或>¶</a>3）按位异或</h6><p>对应的二进制位不相同时，结果为 1，否则为 0。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 3^5;</span><br><span class=line>+-----+</span><br><span class=line>| 3^5 |</span><br><span class=line>+-----+</span><br><span class=line>|   6 |</span><br><span class=line>+-----+</span><br></pre></td></tr></table></figure><h6 id=4）按位取反><a class=header-anchor href=#4）按位取反>¶</a>4）按位取反</h6><p>将对应的二进制数逐位反转，即 1 取反后变 0 ，0 取反后变 1。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select ~18446744073709551612;</span><br><span class=line>+-----------------------+</span><br><span class=line>| ~18446744073709551612 |</span><br><span class=line>+-----------------------+</span><br><span class=line>|                     3 |</span><br><span class=line>+-----------------------+</span><br></pre></td></tr></table></figure><h6 id=5）按位右移><a class=header-anchor href=#5）按位右移>¶</a>5）按位右移</h6><p>使指定的二进制位都右移指定的位数，右移指定位之后，右边低位的数值将被移出<br>并丢弃，左边高位空出的职位用 0 补齐。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 3&gt;&gt;1;</span><br><span class=line>+------+</span><br><span class=line>| 3&gt;&gt;1 |</span><br><span class=line>+------+</span><br><span class=line>|    1 |</span><br><span class=line>+------+</span><br></pre></td></tr></table></figure><h6 id=6）按位左移><a class=header-anchor href=#6）按位左移>¶</a>6）按位左移</h6><p>使指定的二进制位都左移指定的位数，左移指定位之后，左边高位的数值将被移出<br>并丢弃，右边低位空出的位置用 0 补齐。</p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>mysql&gt; select 3&lt;&lt;1;</span><br><span class=line>+------+</span><br><span class=line>| 3&lt;&lt;1 |</span><br><span class=line>+------+</span><br><span class=line>|    6 |</span><br><span class=line>+------+</span><br></pre></td></tr></table></figure><h5 id=（5）运算符优先级><a class=header-anchor href=#（5）运算符优先级>¶</a>（5）运算符优先级</h5><p>最低优先级为： <strong>:=</strong>。<br><img data-src="https://img-blog.csdnimg.cn/20200711174430202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYzNjcwMg==,size_16,color_FFFFFF,t_70"><br>最高优先级为： <strong>!</strong>、<strong>BINARY</strong>、 <strong>COLLATE</strong>。</p></div><div><ul class=post-copyright><li class=post-copyright-author><strong>本文作者：</strong>Maisy</li><li class=post-copyright-link><strong>本文链接：</strong> <a href=https://pdxblog.top/MySQL%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2.html title=MySQL高级查询>https://pdxblog.top/MySQL高级查询.html</a></li><li class=post-copyright-license><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel=noopener target=_blank><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class=post-footer><div class=post-tags><a href="/tags/MySQL/" rel=tag># MySQL</a></div><div class=post-nav><div class=post-nav-item><a href=/XtraBacup%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D.html rel=prev title=XtraBacup备份与恢复><i class="fa fa-chevron-left"></i> XtraBacup备份与恢复</a></div><div class=post-nav-item><a href=/MySQL%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html rel=next title=MySQL基本操作>MySQL基本操作 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class=comments id=valine-comments></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class=sidebar><div class=sidebar-inner><ul class="sidebar-nav motion-element"><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#MySQL高级查询><span class=nav-number>1.</span> <span class=nav-text>¶MySQL高级查询</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#一、DDL语句（修改表结构）><span class=nav-number>1.1.</span> <span class=nav-text>¶一、DDL语句（修改表结构）</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1、修改表><span class=nav-number>1.1.1.</span> <span class=nav-text>¶1、修改表</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#2、添加主键><span class=nav-number>1.1.2.</span> <span class=nav-text>¶2、添加主键</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#3、添加外键><span class=nav-number>1.1.3.</span> <span class=nav-text>¶3、添加外键</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#4、小结><span class=nav-number>1.1.4.</span> <span class=nav-text>¶4、小结</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#5、上机练习><span class=nav-number>1.1.5.</span> <span class=nav-text>¶5、上机练习</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#（1）创建数据表并实现对表的修改操作><span class=nav-number>1.1.5.1.</span> <span class=nav-text>¶（1）创建数据表并实现对表的修改操作</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（2）添加成绩表主外键><span class=nav-number>1.1.5.2.</span> <span class=nav-text>¶（2）添加成绩表主外键</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#二、DML语句（增删改）><span class=nav-number>1.2.</span> <span class=nav-text>¶二、DML语句（增删改）</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1、插入单条数据记录><span class=nav-number>1.2.1.</span> <span class=nav-text>¶1、插入单条数据记录</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#2、插入多条数据记录><span class=nav-number>1.2.2.</span> <span class=nav-text>¶2、插入多条数据记录</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#3、将查询结果插入新表><span class=nav-number>1.2.3.</span> <span class=nav-text>¶3、将查询结果插入新表</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#（1）事先创建新表且与插入数据字段相符><span class=nav-number>1.2.3.1.</span> <span class=nav-text>¶（1）事先创建新表且与插入数据字段相符</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（2）无需事先创建新表><span class=nav-number>1.2.3.2.</span> <span class=nav-text>¶（2）无需事先创建新表</span></a></li></ol></li><li class="nav-item nav-level-4"><a class=nav-link href=#4、更新数据记录><span class=nav-number>1.2.4.</span> <span class=nav-text>¶4、更新数据记录</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#5、删除数据记录><span class=nav-number>1.2.5.</span> <span class=nav-text>¶5、删除数据记录</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#6、小结><span class=nav-number>1.2.6.</span> <span class=nav-text>¶6、小结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#三、DQL语句（查询）><span class=nav-number>1.3.</span> <span class=nav-text>¶三、DQL语句（查询）</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1、通用查询><span class=nav-number>1.3.1.</span> <span class=nav-text>¶1、通用查询</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#2、LIMIT子句><span class=nav-number>1.3.2.</span> <span class=nav-text>¶2、LIMIT子句</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#3、常用函数><span class=nav-number>1.3.3.</span> <span class=nav-text>¶3、常用函数</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#（1）聚合函数><span class=nav-number>1.3.3.1.</span> <span class=nav-text>¶（1）聚合函数</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（2）字符串函数><span class=nav-number>1.3.3.2.</span> <span class=nav-text>¶（2）字符串函数</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（3）时间日期函数><span class=nav-number>1.3.3.3.</span> <span class=nav-text>¶（3）时间日期函数</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（4）数学函数><span class=nav-number>1.3.3.4.</span> <span class=nav-text>¶（4）数学函数</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（5）系统信息函数><span class=nav-number>1.3.3.5.</span> <span class=nav-text>¶（5）系统信息函数</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（6）条件判断函数><span class=nav-number>1.3.3.6.</span> <span class=nav-text>¶（6）条件判断函数</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（7）加密-解密函数><span class=nav-number>1.3.3.7.</span> <span class=nav-text>¶（7）加密&#x2F;解密函数</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（8）其它函数><span class=nav-number>1.3.3.8.</span> <span class=nav-text>¶（8）其它函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class=nav-link href=#4、运算符><span class=nav-number>1.3.4.</span> <span class=nav-text>¶4、运算符</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#（1）算术运算符><span class=nav-number>1.3.4.1.</span> <span class=nav-text>¶（1）算术运算符</span></a></li><li class="nav-item nav-level-5"><a class=nav-link href=#（2）比较运算符><span class=nav-number>1.3.4.2.</span> <span class=nav-text>¶（2）比较运算符</span></a><ol class=nav-child><li class="nav-item nav-level-6"><a class=nav-link href=#1）等于><span class=nav-number>1.3.4.2.1.</span> <span class=nav-text>¶1）等于</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#2）不等于><span class=nav-number>1.3.4.2.2.</span> <span class=nav-text>¶2）不等于</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#3）安全等于><span class=nav-number>1.3.4.2.3.</span> <span class=nav-text>¶3）安全等于</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#4）小于><span class=nav-number>1.3.4.2.4.</span> <span class=nav-text>¶4）小于</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#5）小于等于><span class=nav-number>1.3.4.2.5.</span> <span class=nav-text>¶5）小于等于</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#6）大于><span class=nav-number>1.3.4.2.6.</span> <span class=nav-text>¶6）大于</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#7）大于等于><span class=nav-number>1.3.4.2.7.</span> <span class=nav-text>¶7）大于等于</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#8）BETWEEN><span class=nav-number>1.3.4.2.8.</span> <span class=nav-text>¶8）BETWEEN</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#9）IN><span class=nav-number>1.3.4.2.9.</span> <span class=nav-text>¶9）IN</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#10）NOT-IN><span class=nav-number>1.3.4.2.10.</span> <span class=nav-text>¶10）NOT IN</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#11）IS-NULL><span class=nav-number>1.3.4.2.11.</span> <span class=nav-text>¶11）IS NULL</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#12）IS-NOT-NULL><span class=nav-number>1.3.4.2.12.</span> <span class=nav-text>¶12）IS NOT NULL</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#13、LIKE><span class=nav-number>1.3.4.2.13.</span> <span class=nav-text>¶13、LIKE</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#14、REGEXP><span class=nav-number>1.3.4.2.14.</span> <span class=nav-text>¶14、REGEXP</span></a></li></ol></li><li class="nav-item nav-level-5"><a class=nav-link href=#（3）逻辑运算符><span class=nav-number>1.3.4.3.</span> <span class=nav-text>¶（3）逻辑运算符</span></a><ol class=nav-child><li class="nav-item nav-level-6"><a class=nav-link href=#1）与><span class=nav-number>1.3.4.3.1.</span> <span class=nav-text>¶1）与</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#2）或><span class=nav-number>1.3.4.3.2.</span> <span class=nav-text>¶2）或</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#3）非><span class=nav-number>1.3.4.3.3.</span> <span class=nav-text>¶3）非</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#4）异或><span class=nav-number>1.3.4.3.4.</span> <span class=nav-text>¶4）异或</span></a></li></ol></li><li class="nav-item nav-level-5"><a class=nav-link href=#（4）位运算符><span class=nav-number>1.3.4.4.</span> <span class=nav-text>¶（4）位运算符</span></a><ol class=nav-child><li class="nav-item nav-level-6"><a class=nav-link href=#1）按位与><span class=nav-number>1.3.4.4.1.</span> <span class=nav-text>¶1）按位与</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#2）按位或><span class=nav-number>1.3.4.4.2.</span> <span class=nav-text>¶2）按位或</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#3）按位异或><span class=nav-number>1.3.4.4.3.</span> <span class=nav-text>¶3）按位异或</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#4）按位取反><span class=nav-number>1.3.4.4.4.</span> <span class=nav-text>¶4）按位取反</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#5）按位右移><span class=nav-number>1.3.4.4.5.</span> <span class=nav-text>¶5）按位右移</span></a></li><li class="nav-item nav-level-6"><a class=nav-link href=#6）按位左移><span class=nav-number>1.3.4.4.6.</span> <span class=nav-text>¶6）按位左移</span></a></li></ol></li><li class="nav-item nav-level-5"><a class=nav-link href=#（5）运算符优先级><span class=nav-number>1.3.4.5.</span> <span class=nav-text>¶（5）运算符优先级</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Maisy src=/images/author.jpg><p class=site-author-name itemprop=name>Maisy</p><div class=site-description itemprop=description>人的一生就是一个储蓄的过程，在奋斗的时候储存了希望；在耕耘的时候储存了一粒种子；在旅行的时候储存了风景；在微笑的时候储存了快乐。聪明的人善于储蓄，在漫长而短暂的人生旅途中，学会储蓄每一个闪光的瞬间，然后用它们酿成一杯美好的回忆，在四季的变幻与交替之间，散发浓香，珍藏一生</div></div><div class="site-state-wrap motion-element"><nav class=site-state><div class="site-state-item site-state-posts"><a href="/archives/"><span class=site-state-item-count>69</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class=site-state-item-count>7</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class=site-state-item-count>7</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/Gilbert2/Gilbert2.github.io title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Gilbert2&#x2F;Gilbert2.github.io" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a></span> <span class=links-of-author-item><a href=https://blog.csdn.net/weixin_45636702 title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_45636702" rel=noopener target=_blank><i class="fab fa-crosshairs fa-fw"></i>CSDN</a></span></div><div class="cc-license motion-element" itemprop=license><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class=cc-opacity rel=noopener target=_blank><img src=/images/cc-by-nc-sa.svg alt="Creative Commons"></a></div></div></div></aside><div id=sidebar-dimmer></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy; 2019 – <span itemprop=copyrightYear>2020</span> <span class=with-love><i class="fa fa-heart"></i></span> <span class=author itemprop=copyrightHolder>Maisy</span> <span class=post-meta-divider>|</span> <span class=post-meta-item-icon><i class="fa fa-chart-area"></i></span> <span class=post-meta-item-text>站点总字数：</span> <span title=站点总字数>572k</span> <span class=post-meta-divider>|</span> <span class=post-meta-item-icon><i class="fa fa-coffee"></i></span> <span class=post-meta-item-text>站点阅读时长 &asymp;</span> <span title=站点阅读时长>8:40</span></div><div class=powered-by>由 <a href="https://hexo.io/" class=theme-link rel=noopener target=_blank>Hexo</a> & <a href="https://muse.theme-next.org/" class=theme-link rel=noopener target=_blank>NexT.Muse</a> 强力驱动</div></div></footer></div><script src=/lib/anime.min.js></script><script src=//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js></script><script src=//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js></script><script src=//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js></script><script src=/lib/velocity/velocity.min.js></script><script src=/lib/velocity/velocity.ui.min.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/schemes/muse.js></script><script src=/js/next-boot.js></script><script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'yK6nF3Ng27WevBtHAbTkt8Jv-gzGzoHsz',
      appKey     : 'DXAxzx0igQL9KzyblmtXnVkh',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script></body></html>